import{r as u,l as k,j as s,t as h,b as x}from"./app-p3FobzL5.js";import{B as P}from"./BulkDeleteButton-QS_1ENxo.js";import{r as U}from"./reservation_status-xTaWxlBJ.js";import{u as y}from"./useTranslation-jbS6ivqO.js";import{H as W}from"./platform_roles-D3HjcMuK.js";import{M as E,a as j,A as V,b as B,c as S}from"./ArrowDown2-DM1rERZ4.js";import{B as C}from"./_rollupPluginBabelHelpers-3bc641ae-btRFf1Fy.js";import{F,V as O,E as $,D as z}from"./ViewReservation-Cmmat_Np.js";import{T as Q}from"./ToolBar-BbtEQ1iQ.js";import{D as q}from"./DataTable-Dg7GowNh.js";import{L as w}from"./Layout-AyYa8XQx.js";import{u as G}from"./use_table_data-mkdPdtFX.js";import{u as J}from"./useDebounce-C3LzOcPg.js";import{f as d}from"./format-DNgEHVKA.js";/* empty css            */import"./popover-trigger-D9abZrFQ.js";import"./Trash-CzXP6s3A.js";import"./popover-header-DBc-fTNW.js";import"./popover-arrow-cOi1xr-l.js";import"./popover-body-Cnhf1gCL.js";import"./popover-footer-Bj-c8mCp.js";import"./FieldRenderer-DBnXtxM-.js";import"./formik.esm-C9K4NhZh.js";import"./input-cx0LjzCS.js";import"./index-CuMLbxmh.js";import"./NewCustomerSchema-Bv1JN8aw.js";import"./index.esm-vozbR36e.js";import"./Minus-CX-dPmlg.js";import"./use-boolean-De0xEA2B.js";import"./index-CTyIfV9B.js";import"./Calendar-DKjvVyJ0.js";import"./ArrowRight2-OjDQz_0a.js";import"./Clock-6LrARp7T.js";import"./string_formatter-C0BoQtKC.js";import"./form-label-rj1Y5muO.js";import"./input-group-3FZosNBb.js";import"./input-addon-B-GPb1QT.js";import"./textarea-pmQ9KYwB.js";import"./FilterSearch-xi2SBHqX.js";import"./menu-option-group-DwzCappL.js";import"./Edit2-BUbnZjhm.js";import"./parse-B5ZfNmo9.js";import"./Eye-BnFH3BGQ.js";import"./input-element-DW2n0nal.js";import"./SearchNormal-CydsvnL-.js";import"./Export-BL6q9MYm.js";import"./Pagination-CMtLnuaE.js";import"./tr-EefZORq7.js";import"./tab-panels-DHV8yGV0.js";import"./ProfileCircle-DpyEwL7u.js";import"./accordion-panel-C6BP8wfC.js";function X({rows:r}){const[i,N]=u.useState(),{t:o}=y(),{mutate:l}=k(),b=async n=>{N(n),h.promise(x.patch("/api/reservations/bulk/update",{ids:r.map(m=>m.id),status:n.value}),{loading:o("Status updating..."),success:()=>(l(m=>m.startsWith("/api/reservations")),o("Reservation updated successfully")),error:()=>o("Reservation update failed")})},f=n=>{h.promise(x.delete("/api/reservations/bulk/delete",{data:{ids:n.map(m=>m.id)}}),{loading:o("Deleting..."),success:()=>(l(m=>m.startsWith("/api/reservations")),o("Reservation deleted successfully")),error:()=>o("Reservation deletion failed")})};return s.jsxDEV("div",{className:"w-full flex items-center justify-end",children:s.jsxDEV("div",{className:"flex items-center gap-4",children:[s.jsxDEV(W,{className:"ml-auto",children:s.jsxDEV(E,{children:[s.jsxDEV(j,{as:C,variant:"outline",colorScheme:i==null?void 0:i.scheme,color:i==null?void 0:i.fgColor,borderColor:i==null?void 0:i.fgColor,rightIcon:s.jsxDEV(V,{},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveReservations/BulkUpdateReservation.tsx",lineNumber:74,columnNumber:26},this),children:(i==null?void 0:i.label)||o("Bulk status")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveReservations/BulkUpdateReservation.tsx",lineNumber:68,columnNumber:13},this),s.jsxDEV(B,{className:"p-1",children:U.map(n=>s.jsxDEV(S,{color:n.fgColor,bgColor:n.bgColor,onClick:()=>b(n),children:o(n.label)},n.value,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveReservations/BulkUpdateReservation.tsx",lineNumber:80,columnNumber:17},this))},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveReservations/BulkUpdateReservation.tsx",lineNumber:78,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveReservations/BulkUpdateReservation.tsx",lineNumber:67,columnNumber:11},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveReservations/BulkUpdateReservation.tsx",lineNumber:66,columnNumber:9},this),s.jsxDEV(P,{onDelete:f},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveReservations/BulkUpdateReservation.tsx",lineNumber:93,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveReservations/BulkUpdateReservation.tsx",lineNumber:65,columnNumber:7},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveReservations/BulkUpdateReservation.tsx",lineNumber:64,columnNumber:5},this)}function Ge(){const{t:r}=y(),[i,N]=u.useState(1),[o,l]=u.useState(10),[b,f]=u.useState(""),[n,m]=u.useState([]),[A,R]=u.useState([]),[c,M]=u.useState({}),{mutate:T}=k(),g=J(b,300),{items:K,meta:D,isLoading:I,refresh:p,isValidating:L}=G("/api/reservations",{search:g,page:i,limit:o,status:c.status,listType:"active",reservationDate:c!=null&&c.reservationDate?d(c==null?void 0:c.reservationDate,"yyyy-MM-dd"):void 0});u.useEffect(()=>{R([])},[g,i,o,L]);const H=async(e,a)=>{try{const{data:t}=await x.patch(`/api/reservations/${e}`,{status:a});t!=null&&t.success&&(h.success(r(t==null?void 0:t.message)||r("Reservation updated successfully")),T(v=>v.startsWith("/api/reservations")),p())}catch(t){h.error(r(t.response.data.message)||r("Something went wrong"))}};return s.jsxDEV(w,{title:r("Active reservations"),children:s.jsxDEV("div",{className:"p-6",children:[s.jsxDEV(Q,{bulkAction:{isBulkAction:!!A.length,BulkUpdateBar:()=>s.jsxDEV(X,{rows:A,reset:()=>R([])},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:85,columnNumber:15},this)},filter:s.jsxDEV(F,{filter:c,setFilter:M},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:88,columnNumber:19},this),exportUrl:"/api/reservations/export/all?listType=active",setSearchQuery:f},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:81,columnNumber:9},this),s.jsxDEV(q,{data:K,isLoading:I,sorting:n,setSorting:m,pagination:{total:D==null?void 0:D.total,page:i,limit:o,setPage:N,setLimit:l},onRowSelection:R,getRowId:e=>e==null?void 0:e.id,enableMultiRowSelection:!0,structure:[{accessorKey:"checkbox",id:"checkbox",enableSorting:!1,header:({table:e})=>s.jsxDEV("input",{type:"checkbox",checked:e==null?void 0:e.getIsAllRowsSelected(),onChange:e==null?void 0:e.getToggleAllRowsSelectedHandler(),className:"accent-primary-500 cursor-pointer scale-110"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:114,columnNumber:17},this),cell:({row:e})=>s.jsxDEV("input",{type:"checkbox",checked:e==null?void 0:e.getIsSelected(),onChange:e==null?void 0:e.getToggleSelectedHandler(),className:"accent-primary-500 cursor-pointer scale-110"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:122,columnNumber:17},this)},{accessorKey:"id",header:()=>r("SL"),cell:e=>e.row.index+1},{accessorKey:"createdAt",header:()=>r("Created On"),cell:({row:e})=>{var a,t;return s.jsxDEV("div",{className:"space-y-1",children:[s.jsxDEV("p",{className:"font-bold",children:d(new Date((a=e.original)==null?void 0:a.createdAt),"dd MMM yyyy")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:140,columnNumber:19},this),s.jsxDEV("p",{children:d(new Date((t=e.original)==null?void 0:t.createdAt),"hh:mm a")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:143,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:139,columnNumber:17},this)}},{accessorKey:"user.fullName",header:()=>r("Customer name")},{accessorKey:"user.phoneNumber",header:()=>r("Contact number")},{accessorKey:"reservationDate",header:()=>r("Time & Date"),cell:({row:e})=>{var a,t,v;return s.jsxDEV("div",{className:"space-y-1",children:[s.jsxDEV("p",{className:"font-bold",children:d((a=e.original)==null?void 0:a.reservationDate,"dd MMM yyyy")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:160,columnNumber:19},this),s.jsxDEV("p",{children:`${(t=e.original)==null?void 0:t.startTime} to ${(v=e.original)==null?void 0:v.endTime}`},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:164,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:159,columnNumber:17},this)}},{accessorKey:"numberOfPeople",header:()=>r("People"),cell:({row:e})=>{var a;return s.jsxDEV("span",{className:"font-bold",children:(a=e.original)==null?void 0:a.numberOfPeople},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:171,columnNumber:34},this)}},{accessorKey:"tableNumber",header:()=>r("Table No"),cell:({row:e})=>{var a;return s.jsxDEV("span",{className:"font-bold",children:(a=e.original)==null?void 0:a.tableNumber},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:176,columnNumber:34},this)}},{accessorKey:"status",header:()=>r("Status"),cell:({row:e})=>{var a;return s.jsxDEV(E,{children:[s.jsxDEV(j,{as:C,size:"sm",variant:"outline",colorScheme:"purple",className:"border-purple-500 text-purple-500 capitalize",rightIcon:s.jsxDEV(V,{},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:189,columnNumber:32},this),children:r((a=e.original)==null?void 0:a.status)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:183,columnNumber:19},this),s.jsxDEV(B,{className:"p-1",children:U.map(t=>s.jsxDEV(S,{color:t.fgColor,onClick:()=>H(e.original.id,t.value),children:r(t.label)},t.value,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:195,columnNumber:23},this))},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:193,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:182,columnNumber:17},this)}},{accessorKey:"actions",header:()=>r("Actions"),cell:({row:e})=>s.jsxDEV("div",{className:"flex gap-2",children:[s.jsxDEV(O,{reservation:e.original,refresh:p,isActive:!0},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:212,columnNumber:19},this),s.jsxDEV($,{reservation:e.original,refresh:p,isIconButton:!0},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:213,columnNumber:19},this),s.jsxDEV(z,{id:e.original.id,refresh:p,isIconButton:!0},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:214,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:211,columnNumber:17},this)}]},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:93,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:80,columnNumber:7},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Reservations/ActiveReservations.tsx",lineNumber:79,columnNumber:5},this)}export{Ge as default};
