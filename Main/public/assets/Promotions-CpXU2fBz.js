import{r as l,j as e,u as w,f as U,S as I,b as _,t as x}from"./app-DV9Enp-g.js";import{u as L,I as k}from"./index-DOaWT0nF.js";import{u as v}from"./useTranslation-B_tqir3M.js";import{F as E,H as f,A as R}from"./platform_roles-C6HFwJ_S.js";import{B as h}from"./_rollupPluginBabelHelpers-3bc641ae-fORsOdMW.js";import{B as F}from"./input-BY0aN3Wh.js";import{L as T}from"./Layout-4Yl3SVGs.js";import{T as B,a as H,b as V,c as W,d as P}from"./tab-panels-vLnb1L73.js";import{S as z}from"./switch-B97T3cky.js";import"./ArrowDown2-BYk1CnSd.js";import"./formik.esm-57hcKfmx.js";import"./form-label-BRtD5jpz.js";import"./format-DNgEHVKA.js";import"./Clock-DOUKTfsE.js";import"./ProfileCircle-kDGWjsR6.js";import"./accordion-panel-Bmo1-bWf.js";import"./use-checkbox-CXyjvu9v.js";import"./visually-hidden.style-Bfr07Aua.js";function C({defaultValue:i="",onChange:o}){const{t:u}=v(),[n,c]=l.useState(i),p=l.useCallback(t=>{const r=t[0];o(r),c(URL.createObjectURL(r))},[]),{getRootProps:g,getInputProps:m,isDragActive:N}=L({onDrop:p});return e.jsxDEV("div",{"data-is-dragactive":N,...g({className:"border text-secondary-500 border-dashed border-secondary-500 rounded-[6px] p-1 relative h-[120px] data-[is-dragactive=true]:border-primary-500 data-[is-dragactive=true]:border-solid transition-all duration-200 ease-in-out data-[is-dragactive=true]:bg-primary/50"}),children:[e.jsxDEV("input",{...m({className:"absolute top-0 left-0 w-full h-full"})},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/FileUpload.tsx",lineNumber:32,columnNumber:7},this),n?e.jsxDEV("div",{className:"w-full h-full relative rounded-md overflow-hidden",children:e.jsxDEV("img",{src:n,className:"absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 w-full object-cover"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/FileUpload.tsx",lineNumber:35,columnNumber:11},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/FileUpload.tsx",lineNumber:34,columnNumber:9},this):e.jsxDEV("div",{"data-is-dragactive":N,className:"flex items-center justify-center flex-col gap-2.5 py-2.5 p-3 h-full",children:[e.jsxDEV(k,{size:"32",variant:"Bold"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/FileUpload.tsx",lineNumber:45,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm leading-5 font-normal",children:[u("Drag and drop files here or")," ",e.jsxDEV("u",{className:"hover:text-primary-500 hover:cursor-pointer",children:u("upload")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/FileUpload.tsx",lineNumber:48,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/FileUpload.tsx",lineNumber:46,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/FileUpload.tsx",lineNumber:41,columnNumber:9},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/FileUpload.tsx",lineNumber:25,columnNumber:5},this)}const a=[];for(let i=0;i<256;++i)a.push((i+256).toString(16).slice(1));function O(i,o=0){return(a[i[o+0]]+a[i[o+1]]+a[i[o+2]]+a[i[o+3]]+"-"+a[i[o+4]]+a[i[o+5]]+"-"+a[i[o+6]]+a[i[o+7]]+"-"+a[i[o+8]]+a[i[o+9]]+"-"+a[i[o+10]]+a[i[o+11]]+a[i[o+12]]+a[i[o+13]]+a[i[o+14]]+a[i[o+15]]).toLowerCase()}let j;const $=new Uint8Array(16);function q(){if(!j){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");j=crypto.getRandomValues.bind(crypto)}return j($)}const G=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),y={randomUUID:G};function S(i,o,u){if(y.randomUUID&&!o&&!i)return y.randomUUID();i=i||{};const n=i.random||(i.rng||q)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,O(n)}function J(){const{t:i}=v(),[o,u]=l.useState(!1),[n,c]=l.useState([{uuid:"b6ff05cb-c21c-4cbe-9158-8653518dd171",id:void 0,image:void 0}]),{data:p,isLoading:g}=w("/api/promotions/slider",U,{revalidateOnFocus:!1}),m=l.useCallback(()=>{c(p==null?void 0:p.content.map(t=>{var r;return{id:t.id,uuid:S(),image:void 0,preview:(r=t==null?void 0:t.sliderImage)==null?void 0:r.url}}))},[p]);l.useEffect(()=>{p&&m()},[m]);const N=async()=>{var t,r,b;u(!0);try{const s=new FormData;n.forEach((D,A)=>{s.append(`slider[${A}][id]`,String(D.id||"")),s.append(`slider[${A}][image]`,D.image||"")});const{data:d}=await _.put("/api/promotions/slider",s,{headers:{"Content-Type":"multipart/form-data"}});d!=null&&d.content&&x.success(i("Slider updated successfully"))}catch(s){(b=(r=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:r.messages)!=null&&b[0]?x.error(i(s.response.data.messages[0].message)):x.error(i("Something went wrong"))}finally{u(!1)}};return g?e.jsxDEV("div",{children:e.jsxDEV(I,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:78,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:77,columnNumber:7},this):e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.map((t,r)=>e.jsxDEV(E,{className:"col-span-1 flex flex-col space-y-2 p-6 bg-white rounded-md shadow-[0px_1px_2px_0px_rgba(0,0,0,0.06),0px_1px_3px_0px_rgba(0,0,0,0.1)]",children:[e.jsxDEV(f,{justify:"space-between",children:[e.jsxDEV("label",{children:[i("Image "),r+1]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:90,columnNumber:13},this),r>0&&e.jsxDEV(h,{variant:"link",colorScheme:"red",className:"text-red-500 font-semibold pr-3",onClick:()=>{c(b=>b.filter(s=>s.uuid!==t.uuid))},children:i("Remove")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:95,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:89,columnNumber:11},this),e.jsxDEV("div",{className:"[&>div]:h-[182px]",children:e.jsxDEV(C,{defaultValue:t.preview||"",onChange:b=>{c(s=>s.map(d=>d.uuid===t.uuid?{...d,image:b}:d))}},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:108,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:107,columnNumber:11},this)]},t.uuid,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:85,columnNumber:9},this)),e.jsxDEV(F,{className:"sm:absolute top-0 right-4",children:e.jsxDEV(f,{className:"gap-4",children:[e.jsxDEV(h,{variant:"outline",colorScheme:"primary",className:"border-primary-500 text-primary-500",onClick:()=>{c([...n,{uuid:S(),id:void 0,image:void 0}])},children:[i("Add new slide"),e.jsxDEV(R,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:138,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:122,columnNumber:11},this),e.jsxDEV(h,{onClick:N,colorScheme:"primary",className:"bg-primary-400 hover:bg-primary-500",isLoading:o,children:i("Update")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:141,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:121,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:120,columnNumber:7},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:83,columnNumber:5},this)}function ce(){var r,b;const{t:i}=v(),[o,u]=l.useState(!1),[n,c]=l.useState(!1),[p,g]=l.useState(),{data:m,isLoading:N}=w("/api/promotions/welcome",U);l.useEffect(()=>{var s;!N&&m&&c(!!((s=m==null?void 0:m.content)!=null&&s.welcomeStatus))},[m]);const t=async()=>{u(!0);try{const s=new FormData;s.append("type","welcome"),s.append("welcomeImage",p||""),s.append("welcomeStatus",n.toString());const{data:d}=await _.put("/api/promotions",s,{headers:{"Content-Type":"multipart/form-data"}});d.success&&x.success(i(d.message))}catch(s){x.error(i(s.response.data.message||"Failed to update"))}finally{u(!1)}};return e.jsxDEV(T,{title:i("Promotions"),children:e.jsxDEV("div",{className:"p-6 relative",children:e.jsxDEV(B,{children:[e.jsxDEV(E,{className:"justify-between",children:e.jsxDEV(H,{children:[e.jsxDEV(V,{children:i("Slider")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:69,columnNumber:15},this),e.jsxDEV(V,{children:i("Welcome pop-up")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:70,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:68,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:67,columnNumber:11},this),e.jsxDEV(W,{children:[e.jsxDEV(P,{children:e.jsxDEV(J,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:76,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:75,columnNumber:13},this),e.jsxDEV(P,{children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N?e.jsxDEV("div",{children:e.jsxDEV(I,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:82,columnNumber:21},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:81,columnNumber:19},this):e.jsxDEV(E,{className:"col-span-1 flex flex-col space-y-2 p-6 bg-white rounded-md shadow-[0px_1px_2px_0px_rgba(0,0,0,0.06),0px_1px_3px_0px_rgba(0,0,0,0.1)]",children:[e.jsxDEV(f,{justify:"space-between",children:[e.jsxDEV("label",{children:i("Image ")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:87,columnNumber:23},this),e.jsxDEV(f,{as:"label",children:[e.jsxDEV("span",{children:"Show Popup"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:89,columnNumber:25},this),e.jsxDEV(z,{isChecked:n,onChange:s=>c(s.target.checked),colorScheme:"green"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:90,columnNumber:25},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:88,columnNumber:23},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:86,columnNumber:21},this),e.jsxDEV("div",{className:"[&>div]:h-[182px]",children:e.jsxDEV(C,{defaultValue:((b=(r=m==null?void 0:m.content)==null?void 0:r.welcomeImage)==null?void 0:b.url)||"",onChange:s=>g(s)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:98,columnNumber:23},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:97,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:85,columnNumber:19},this),e.jsxDEV(F,{className:"sm:absolute top-0 right-4",children:e.jsxDEV(f,{className:"gap-4",children:e.jsxDEV(h,{onClick:t,colorScheme:"primary",className:"bg-primary-400 hover:bg-primary-500",isLoading:o,children:i("Update")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:108,columnNumber:21},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:107,columnNumber:19},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:106,columnNumber:17},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:79,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:78,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:74,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:66,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:65,columnNumber:7},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Promotions.tsx",lineNumber:64,columnNumber:5},this)}export{ce as default};
