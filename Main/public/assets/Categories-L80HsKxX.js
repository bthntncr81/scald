import{j as e,t as h,b as E,m as K,r as f,M as S,c as F,a as k,k as ue}from"./app-DV9Enp-g.js";import{B as ge}from"./BulkDeleteButton-BS9Zhni5.js";import{u as C}from"./useTranslation-B_tqir3M.js";import{H as be,D as B,a as P,F as I,M as R,A as L,B as pe}from"./platform_roles-C6HFwJ_S.js";import{T as x,M as Ne,a as fe,A as G,b as he}from"./ArrowDown2-BYk1CnSd.js";import{S as _}from"./switch-B97T3cky.js";import{P as T,a as Q,b as $}from"./popover-trigger-bCcTHQgY.js";import{a as J,F as xe,I as Y,B as Ee}from"./input-BY0aN3Wh.js";import{T as Ce}from"./Trash-D0bDSe0A.js";import{B as p,u as z}from"./_rollupPluginBabelHelpers-3bc641ae-fORsOdMW.js";import{P as je}from"./popover-header-BFLhNdCb.js";import{P as ve,B as ye}from"./popover-arrow-CcvyMVbB.js";import{P as X}from"./popover-body-Dv7tL-tk.js";import{P as Z}from"./popover-footer-DDOtcm9S.js";import{u as Ae,c as De,F as ee,a as ie}from"./formik.esm-57hcKfmx.js";import{z as Ve}from"./index-CuMLbxmh.js";import{I as we}from"./ImageUpload-D5P185gr.js";import{F as Se}from"./form-label-BRtD5jpz.js";import{c as te,a as ae,d as se,e as oe,b as ne}from"./index.esm-DH7tFHsH.js";import{u as M,M as U,L as Fe}from"./Layout-4Yl3SVGs.js";import{E as W}from"./Edit2-BR-gFx13.js";import{s as H}from"./string_formatter-C0BoQtKC.js";import{F as ke}from"./FilterSearch-1uMYI-Ol.js";import{M as Be,a as Pe}from"./menu-option-group-DB7xgu7N.js";import{I as Ie}from"./input-group-B3tcnjIp.js";import{P as Re}from"./popover-anchor-BlKiDovh.js";import{I as Te}from"./input-addon-BXuOB8U6.js";import{u as $e}from"./use-boolean-S__THBuA.js";import{E as ze}from"./Eye-14Q_bsoa.js";import{T as Me}from"./ToolBar-CxhXniPl.js";import{D as Ue}from"./DataTable-CNld8Vzj.js";import{u as qe}from"./use_table_data-Dqvu1vx3.js";import{u as Oe}from"./useDebounce-BZ39Q-Ut.js";import"./use-checkbox-CXyjvu9v.js";import"./visually-hidden.style-Bfr07Aua.js";import"./index-DOaWT0nF.js";import"./tab-panels-vLnb1L73.js";import"./format-DNgEHVKA.js";import"./Clock-DOUKTfsE.js";import"./ProfileCircle-kDGWjsR6.js";import"./accordion-panel-Bmo1-bWf.js";import"./input-element-D56J_yd_.js";import"./SearchNormal-wibGUap8.js";import"./Export-C4Sp0XrA.js";import"./Pagination-BLwLKiba.js";import"./tr-DmrvMSh4.js";import"./ArrowRight2-Cm1MJeQW.js";function Ke({rows:i,reset:o,available:m,setAvailable:n}){const{t:a}=C(),r=t=>{h.promise(E.patch("/api/categories/bulk/update",{ids:i.map(d=>d.id),isAvailable:t}),{loading:a("Updating availability..."),success:()=>(K(d=>d.startsWith("/api/categories")),a("Categories availability updated successfully")),error:()=>a("Failed to update categories availability")})},c=()=>{h.promise(E.delete("/api/categories/bulk/delete",{data:{ids:i.map(t=>t.id)}}),{loading:a("Deleting..."),success:()=>(o==null||o(),K(t=>t.startsWith("/api/categories")),a("Categories deleted successfully")),error:()=>a("Failed to delete categories")})};return e.jsxDEV("div",{className:"w-full flex items-center justify-end",children:e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV(be,{className:"ml-auto",children:[e.jsxDEV(x,{color:"secondary.400",children:[" ",a("Availability")," "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/CategoriesBulkUpdateBar.tsx",lineNumber:67,columnNumber:11},this),e.jsxDEV(_,{size:"lg",colorScheme:"green",isChecked:m,onChange:t=>{n(t.target.checked),r(t.target.checked)}},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/CategoriesBulkUpdateBar.tsx",lineNumber:68,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/CategoriesBulkUpdateBar.tsx",lineNumber:66,columnNumber:9},this),e.jsxDEV(ge,{onDelete:c},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/CategoriesBulkUpdateBar.tsx",lineNumber:79,columnNumber:9},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/CategoriesBulkUpdateBar.tsx",lineNumber:65,columnNumber:7},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/CategoriesBulkUpdateBar.tsx",lineNumber:64,columnNumber:5},this)}function re({isIconButton:i=!1,id:o,refresh:m}){const{t:n}=C(),a=async()=>{try{const{data:r,status:c}=await E.delete(`/api/categories/${o}`);c===200&&(h.success(r.message),m())}catch(r){E.isAxiosError(r)&&h.error(n("Something went wrong"))}};return e.jsxDEV(T,{children:({onClose:r})=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Q,{children:i?e.jsxDEV(J,{"aria-label":n("Delete"),icon:e.jsxDEV(Ce,{size:"18"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:52,columnNumber:23},this),colorScheme:"red",className:"hover:bg-red-100",variant:"outline"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:50,columnNumber:15},this):e.jsxDEV(p,{variant:"outline",w:"full",colorScheme:"red",mr:3,children:n("Delete")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:58,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:48,columnNumber:11},this),e.jsxDEV($,{children:[e.jsxDEV(je,{pt:4,fontWeight:"bold",border:"0",children:n("Delete Category")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:64,columnNumber:13},this),e.jsxDEV(ve,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:67,columnNumber:13},this),e.jsxDEV(X,{whiteSpace:"normal",children:n("Are you sure you want to delete this category?")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:68,columnNumber:13},this),e.jsxDEV(Z,{border:"0",display:"flex",alignItems:"center",justifyContent:"flex-end",pb:4,children:e.jsxDEV(ye,{size:"sm",children:[e.jsxDEV(p,{colorScheme:"secondary",className:"bg-secondary-200 text-secondary-800 hover:bg-secondary-300",onClick:r,children:n("Cancel")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:79,columnNumber:17},this),e.jsxDEV(p,{colorScheme:"red",className:"bg-red-400 hover:bg-red-500",onClick:a,children:n("Delete")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:86,columnNumber:17},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:78,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:71,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:63,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:47,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/DeleteCategory.tsx",lineNumber:45,columnNumber:5},this)}function le({label:i,type:o,preview:m="",...n}){const{t:a}=C(),[r,c,t]=Ae(n);return e.jsxDEV(xe,{isInvalid:!!(c.touched&&c.error),children:[i&&e.jsxDEV(Se,{className:`text-sm ${n.name==="image"?"text-secondary-900":"text-secondary-500"}`,children:a(i)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FieldRenderer.tsx",lineNumber:22,columnNumber:9},this),Ve(o).with("file",()=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(we,{defaultValue:m,onChange:d=>t.setValue(d)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FieldRenderer.tsx",lineNumber:33,columnNumber:13},this),e.jsxDEV(x,{as:"p",color:"secondary.400",mt:"18px",children:"*The image should be 64x64px in PNG/JPG format*"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FieldRenderer.tsx",lineNumber:34,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FieldRenderer.tsx",lineNumber:32,columnNumber:11},this)).otherwise(()=>e.jsxDEV(Y,{type:o,placeholder:a(n.placeholder||""),...r,...n},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FieldRenderer.tsx",lineNumber:42,columnNumber:11},this)),e.jsxDEV(De,{children:a(c.error||"")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FieldRenderer.tsx",lineNumber:45,columnNumber:7},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FieldRenderer.tsx",lineNumber:20,columnNumber:5},this)}const Le=["image/jpeg","image/png","image/jpg"],We=te().shape({name:ae().required("Name is required"),isAvailable:se().required("Availability is required"),priority:oe().required("Priority is required"),image:ne().nullable().test("fileType","Unsupported file format",i=>i&&Le.includes(i.type))});function me({category:i,refresh:o,isIconButton:m}){var b;const{isOpen:n,onOpen:a,onClose:r}=z(),c=f.useRef(null),{t}=C(),d=M(),g=[{name:"image",label:"Category image",type:"file",preview:((b=i==null?void 0:i.image)==null?void 0:b.url)||""},{name:"name",type:"text",placeholder:"Category name"}];return e.jsxDEV(e.Fragment,{children:[m?e.jsxDEV(J,{"aria-label":t("Edit"),icon:e.jsxDEV(W,{size:"18"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:53,columnNumber:17},this),colorScheme:"blue",className:"hover:bg-blue-100",variant:"outline",onClick:a},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:51,columnNumber:9},this):e.jsxDEV(p,{"aria-label":"Edit",rightIcon:e.jsxDEV(W,{size:"18"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:62,columnNumber:22},this),colorScheme:"blue",className:"hover:bg-blue-100",w:"full",variant:"outline",onClick:a,children:t("Edit")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:60,columnNumber:9},this),e.jsxDEV(B,{isOpen:n,placement:d.width<640?"bottom":"right",size:"md",onClose:r,finalFocusRef:c,children:[e.jsxDEV(S,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:79,columnNumber:9},this),e.jsxDEV(P,{className:"h-[80%] sm:h-auto rounded-xl sm:rounded-none",children:[e.jsxDEV(U,{className:"border-b border-black/5",children:[t("Edit category"),e.jsxDEV(F,{className:"sm:hidden"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:83,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:81,columnNumber:11},this),e.jsxDEV(ee,{initialValues:{name:(i==null?void 0:i.name)||"",image:"",priority:(i==null?void 0:i.priority)||1,isAvailable:!!(i!=null&&i.isAvailable)},onSubmit:async(l,u)=>{try{u.setSubmitting(!0);const j=new FormData;for(const y in l)Array.isArray(l[y])?l[y].forEach(V=>j.append(`${y}[]`,V??"")):j.append(y,l[y]);const{data:A}=await E.put(`/api/categories/${i==null?void 0:i.id}`,j,{headers:{"Content-Type":"multipart/form-data"}});A!=null&&A.success&&(r(),o(),h.success(A.message))}catch(j){h.error(t(j.response.data.message)||t("Something went wrong"))}finally{u.setSubmitting(!1)}},validationSchema:We,children:({isSubmitting:l})=>e.jsxDEV(ie,{children:[e.jsxDEV(k,{className:"space-y-4",children:[g.map(u=>e.jsxDEV(I,{flexDir:"column",gap:"18px",children:e.jsxDEV(le,{...u},u.name,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:128,columnNumber:23},this)},u.name,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:127,columnNumber:21},this)),e.jsxDEV("hr",{className:"border-black/5"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:131,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:125,columnNumber:17},this),e.jsxDEV(R,{borderTopWidth:"1px",borderColor:"secondary.200",className:"absolute bg-white w-full bottom-0",children:[e.jsxDEV(p,{variant:"outline",w:"full",mr:3,onClick:r,children:t("Cancel")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:138,columnNumber:19},this),e.jsxDEV(p,{variant:"solid",colorScheme:"primary",w:"full",type:"submit",isLoading:l,className:"bg-primary-400 hover:bg-primary-500",children:t("Update")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:141,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:133,columnNumber:17},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:124,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:86,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:80,columnNumber:9},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:72,columnNumber:7},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/EditCategory.tsx",lineNumber:49,columnNumber:5},this)}function He({filter:i,setFilter:o}){var n;const{t:m}=C();return e.jsxDEV(T,{matchWidth:!0,children:[e.jsxDEV(Q,{children:e.jsxDEV(p,{variant:"outline",leftIcon:e.jsxDEV(ke,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:35,columnNumber:45},this),children:m("Filter")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:35,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:34,columnNumber:7},this),e.jsxDEV($,{children:[e.jsxDEV(X,{className:"w-full p-2.5",children:e.jsxDEV(Ne,{matchWidth:!0,children:[e.jsxDEV("div",{className:"flex flex-col gap-1.5",children:[e.jsxDEV(x,{className:"text-secondary-500",children:m("Availability")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:44,columnNumber:15},this),e.jsxDEV(fe,{as:p,className:"w-full text-left justify-start bg-secondary-50 font-normal",rightIcon:e.jsxDEV(G,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:48,columnNumber:28},this),color:i.available?"inherit":"secondary.500",children:i.available?m(H(i.available==="true"?"Available":"Unavailable")):m("Availability")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:45,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:43,columnNumber:13},this),e.jsxDEV(he,{className:"w-full p-1",children:e.jsxDEV(Be,{value:(n=i.available)==null?void 0:n.toString(),onChange:a=>{o(r=>({...r,available:a}))},type:"radio",children:["true","false"].map(a=>e.jsxDEV(Pe,{value:a,icon:null,children:m(H(a==="true"?"Available":"Unavailable"))},a,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:65,columnNumber:19},this))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:57,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:56,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:42,columnNumber:11},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:40,columnNumber:9},this),e.jsxDEV(Z,{className:"border-black/5",children:e.jsxDEV(p,{size:"md",className:"w-full",onClick:()=>o({}),children:m("Clear")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:74,columnNumber:11},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:73,columnNumber:9},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:39,columnNumber:7},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/FilterCategories.tsx",lineNumber:33,columnNumber:5},this)}const Ge=["image/jpeg","image/png","image/jpg"],_e=te().shape({name:ae().required("Name is required"),isAvailable:se().required("Availability is required"),priority:oe().required("Priority is required"),image:ne().required("Image is required").test("fileType","Unsupported file format",i=>i&&Ge.includes(i.type))});function Qe({refresh:i}){const{t:o}=C(),{isOpen:m,onOpen:n,onClose:a}=z(),r=f.useRef(null),c=M(),t=[{name:"image",label:"Category image",type:"file"},{name:"name",type:"text",placeholder:"Category name"}];return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(p,{colorScheme:"primary",className:"bg-primary-400 text-white hover:bg-primary-500",rightIcon:e.jsxDEV(L,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:44,columnNumber:20},this),onClick:n,children:o("Create new category")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:41,columnNumber:7},this),e.jsxDEV(B,{isOpen:m,placement:c.width<640?"bottom":"right",size:"md",onClose:a,finalFocusRef:r,children:[e.jsxDEV(S,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:56,columnNumber:9},this),e.jsxDEV(P,{className:"h-[80%] sm:h-auto rounded-xl sm:rounded-none",children:[e.jsxDEV(U,{className:"border-b border-black/5",children:[o("Create new category"),e.jsxDEV(F,{className:"sm:hidden"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:60,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:58,columnNumber:11},this),e.jsxDEV(ee,{initialValues:{name:"",image:"",priority:1,isAvailable:!0},onSubmit:async(d,g)=>{try{g.setSubmitting(!0);const b=new FormData;for(const u in d)Array.isArray(d[u])?d[u].forEach(j=>b.append(`${u}[]`,j??"")):b.append(u,d[u]);const{data:l}=await E.post("/api/categories",b,{headers:{"Content-Type":"multipart/form-data"}});l!=null&&l.success&&(a(),i(),h.success(l.message))}catch(b){h.error(o(b.response.data.message)||o("Something went wrong"))}finally{g.setSubmitting(!1)}},validationSchema:_e,children:({isSubmitting:d})=>e.jsxDEV(ie,{children:[e.jsxDEV(k,{className:"space-y-4",children:[t.map(g=>e.jsxDEV(I,{flexDir:"column",gap:"18px",children:e.jsxDEV(le,{...g},g.name,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:105,columnNumber:23},this)},g.name,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:104,columnNumber:21},this)),e.jsxDEV("hr",{className:"border-black/5"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:108,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:102,columnNumber:17},this),e.jsxDEV(R,{borderTopWidth:"1px",borderColor:"secondary.200",className:"absolute bg-white w-full bottom-0",children:[e.jsxDEV(p,{variant:"outline",w:"full",mr:3,onClick:a,children:o("Cancel")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:115,columnNumber:19},this),e.jsxDEV(p,{variant:"solid",colorScheme:"primary",w:"full",type:"submit",isLoading:d,className:"bg-primary-400 hover:bg-primary-500",rightIcon:e.jsxDEV(L,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:125,columnNumber:32},this),children:o("Create")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:118,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:110,columnNumber:17},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:101,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:63,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:57,columnNumber:9},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:49,columnNumber:7},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/NewCategory.tsx",lineNumber:40,columnNumber:5},this)}function Je({defaultPriority:i,id:o,total:m=10,refresh:n}){const{t:a}=C(),[r,c]=f.useState(`${i}`),[t,d]=$e(),g=async b=>{try{const{data:l,status:u}=await E.patch(`/api/categories/${o}`,{priority:b});u===200&&(h.success(l.message),n())}catch(l){E.isAxiosError(l)&&h.error(a("Something went wrong"))}};return e.jsxDEV("div",{className:"w-36",children:e.jsxDEV(T,{isOpen:t,onOpen:d.on,onClose:d.off,placement:"bottom-end",children:[e.jsxDEV(Ie,{children:[e.jsxDEV(Y,{bg:"white",borderColor:"secondary.700",value:r,type:"text",onChange:b=>c(b.target.value),className:"rounded-r-none",onBlur:()=>{g(r)},onKeyDown:b=>{b.key==="Enter"&&g(r)}},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/PrioritySelection.tsx",lineNumber:61,columnNumber:11},this),e.jsxDEV(Re,{children:e.jsxDEV(Te,{as:"button",onClick:d.on,className:"w-fit",bg:"secondary.200",children:e.jsxDEV(G,{size:"14px"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/PrioritySelection.tsx",lineNumber:84,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/PrioritySelection.tsx",lineNumber:78,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/PrioritySelection.tsx",lineNumber:77,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/PrioritySelection.tsx",lineNumber:60,columnNumber:9},this),e.jsxDEV(ue,{children:e.jsxDEV($,{className:"w-36",children:e.jsxDEV(I,{flexDir:"column",alignItems:"stretch",p:1,maxH:"400px",overflowY:"auto",children:Array.from({length:m}).map((b,l)=>e.jsxDEV(p,{type:"button","aria-label":`priority-${l}`,"data-selected":r===`${l+1}`,variant:"ghost",className:"text-left justify-start data-[selected=true]:bg-secondary-100 py-1 h-8",onClick:()=>{c(`${l+1}`),d.off(),g(`${l+1}`)},children:l+1},l,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/PrioritySelection.tsx",lineNumber:93,columnNumber:17},this))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/PrioritySelection.tsx",lineNumber:91,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/PrioritySelection.tsx",lineNumber:90,columnNumber:11},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/PrioritySelection.tsx",lineNumber:89,columnNumber:9},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/PrioritySelection.tsx",lineNumber:54,columnNumber:7},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/PrioritySelection.tsx",lineNumber:53,columnNumber:5},this)}function Ye({isAvailable:i,id:o,refresh:m}){const{t:n}=C(),a=async r=>{try{const{data:c,status:t}=await E.patch(`/api/categories/${o}`,{isAvailable:r});t===200&&(h.success(c.message),m())}catch(c){E.isAxiosError(c)&&h.error(n("Something went wrong"))}};return e.jsxDEV(_,{colorScheme:"green",defaultChecked:!!i,size:"lg",onChange:r=>a(r.target.checked)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ToggleAvailability.tsx",lineNumber:35,columnNumber:5},this)}function Xe({category:i,refresh:o}){var d;const{isOpen:m,onOpen:n,onClose:a}=z(),r=M(),c=f.useRef(null),{t}=C();return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(p,{variant:"outline",colorScheme:"secondary",className:"border-secondary-200 text-secondary-800 hover:bg-secondary-100",rightIcon:e.jsxDEV(ze,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:39,columnNumber:20},this),onClick:n,children:t("View")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:35,columnNumber:7},this),e.jsxDEV(B,{isOpen:m,placement:r.width<640?"bottom":"right",size:"md",onClose:a,finalFocusRef:c,children:[e.jsxDEV(S,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:51,columnNumber:9},this),e.jsxDEV(P,{className:"h-[80%] sm:h-auto rounded-xl sm:rounded-none",children:[e.jsxDEV(U,{className:"border-b border-black/5",children:[t("Category"),e.jsxDEV(F,{className:"sm:hidden"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:55,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:53,columnNumber:11},this),e.jsxDEV(k,{children:e.jsxDEV("div",{className:"flex flex-col gap-5 sm:px-4 py-6",children:[e.jsxDEV("div",{children:e.jsxDEV("img",{src:i.image.url,alt:i.name,className:"w-full rounded-md aspect-[3/2]",onError:g=>g.currentTarget.src="/default_fallback.png"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:61,columnNumber:17},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:60,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-col gap-2",children:[e.jsxDEV(x,{as:"p",className:"text-secondary-500",children:t("Category name")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:70,columnNumber:17},this),e.jsxDEV(x,{as:"h5",className:"font-semibold text-lg",children:t(i.name)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:73,columnNumber:17},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:69,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"flex flex-col gap-2",children:[e.jsxDEV(x,{as:"p",className:"text-secondary-500",children:t("Item count")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:80,columnNumber:19},this),e.jsxDEV(x,{as:"h5",className:"font-semibold text-lg",children:(d=i.menuItems)==null?void 0:d.length},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:83,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:79,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-col gap-2",children:[e.jsxDEV(x,{as:"p",className:"text-secondary-500",children:t("Priority")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:89,columnNumber:19},this),e.jsxDEV(x,{as:"h5",className:"font-semibold text-lg",children:i.priority},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:92,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:88,columnNumber:17},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:78,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-col gap-2",children:[e.jsxDEV(x,{as:"p",children:[" ",t("Availability")," "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:99,columnNumber:17},this),e.jsxDEV(pe,{size:"md",colorScheme:i.isAvailable?"green":"red",className:"w-fit",children:t(i.isAvailable?t("Available"):t("Unavailable"))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:100,columnNumber:17},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:98,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:59,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:58,columnNumber:11},this),e.jsxDEV(R,{borderTopWidth:"1px",borderColor:"secondary.200",className:"absolute bg-white w-full bottom-0",children:[e.jsxDEV(p,{variant:"outline",w:"full",mr:3,onClick:a,children:t("Close")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:116,columnNumber:13},this),e.jsxDEV(re,{id:i==null?void 0:i.id,refresh:o},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:119,columnNumber:13},this),e.jsxDEV(me,{category:i,refresh:o},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:120,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:111,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:52,columnNumber:9},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:44,columnNumber:7},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Categories/ViewCategory.tsx",lineNumber:34,columnNumber:5},this)}function Hi(){const{t:i}=C(),[o,m]=f.useState(1),[n,a]=f.useState(10),[r,c]=f.useState(""),[t,d]=f.useState([]),[g,b]=f.useState({}),[l,u]=f.useState([]),[j,A]=f.useState(!1),y=Oe(r,300),{items:V,meta:w,isLoading:de,refresh:D,isValidating:q}=qe("/api/categories",{page:o,limit:n,search:y,available:g.available});return f.useEffect(()=>{!q&&V.length===0&&u([])},[q]),e.jsxDEV(Fe,{title:i("Categories"),children:e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV(Me,{bulkAction:{isBulkAction:!!l.length,BulkUpdateBar:()=>e.jsxDEV(Ke,{rows:l,reset:()=>u([]),available:j,setAvailable:A},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:57,columnNumber:15},this)},filter:e.jsxDEV(He,{filter:g,setFilter:b},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:65,columnNumber:19},this),AddNew:()=>e.jsxDEV(Qe,{refresh:D},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:66,columnNumber:25},this),setSearchQuery:c},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:53,columnNumber:9},this),e.jsxDEV(Ue,{data:V,isLoading:de,sorting:t,setSorting:d,enableMultiRowSelection:!0,getRowId:s=>s.id,onRowSelection:u,pagination:{total:w==null?void 0:w.total,page:o,setPage:m,limit:n,setLimit:a},structure:[{accessorKey:"checkbox",enableSorting:!1,header:({table:s})=>e.jsxDEV("input",{type:"checkbox",checked:s==null?void 0:s.getIsAllRowsSelected(),onChange:s==null?void 0:s.getToggleAllRowsSelectedHandler(),className:"accent-primary-500 cursor-pointer scale-110"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:90,columnNumber:17},this),cell:({row:s})=>e.jsxDEV("input",{type:"checkbox",checked:s==null?void 0:s.getIsSelected(),onChange:s==null?void 0:s.getToggleSelectedHandler(),className:"accent-primary-500 cursor-pointer scale-110"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:98,columnNumber:17},this)},{accessorKey:"id",header:()=>i("SL"),cell:s=>s.row.index+1},{accessorKey:"image",header:()=>"",meta:{className:"px-2.5"},cell:({row:s})=>{var N,v,O;return e.jsxDEV(Ee,{w:"60px",rounded:1,children:e.jsxDEV("img",{className:"w-[60px] h-[50px] object-cover",src:(v=(N=s.original)==null?void 0:N.image)==null?void 0:v.url,alt:(O=s.original)==null?void 0:O.name,onError:ce=>ce.currentTarget.src="/default_fallback.png"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:117,columnNumber:19},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:116,columnNumber:17},this)}},{accessorKey:"name",header:()=>i("Category name")},{accessorKey:"menuItems",header:()=>i("Item count"),cell:({row:s})=>{var N,v;return e.jsxDEV(x,{children:(v=(N=s.original)==null?void 0:N.menuItems)==null?void 0:v.length},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:133,columnNumber:34},this)}},{accessorKey:"priority",header:()=>i("Priority"),cell:({row:s})=>{var N,v;return e.jsxDEV(Je,{defaultPriority:(N=s.original)==null?void 0:N.priority,id:(v=s.original)==null?void 0:v.id,total:w.total,refresh:D},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:139,columnNumber:17},this)}},{accessorKey:"isAvailable",header:()=>i("Availability"),cell:({row:s})=>{var N;return e.jsxDEV(Ye,{isAvailable:(N=s.original)==null?void 0:N.isAvailable,id:s.original.id,refresh:D},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:151,columnNumber:17},this)}},{accessorKey:"actions",header:()=>i("Actions"),cell:({row:s})=>{var N;return e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(Xe,{category:s.original,refresh:D},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:163,columnNumber:19},this),e.jsxDEV(me,{isIconButton:!0,category:s.original,refresh:D},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:164,columnNumber:19},this),e.jsxDEV(re,{isIconButton:!0,id:(N=s.original)==null?void 0:N.id,refresh:D},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:165,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:162,columnNumber:17},this)}}]},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:70,columnNumber:9},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:52,columnNumber:7},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/Categories.tsx",lineNumber:51,columnNumber:5},this)}export{Hi as default};
