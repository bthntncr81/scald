import{r as l,j as e,u as y,f as S,S as w,b as I,t as x}from"./app-p3FobzL5.js";import{u as C,I as L}from"./index-5KvuJqVB.js";import{u as U}from"./useTranslation-jbS6ivqO.js";import{F as v,H as f,A as R}from"./platform_roles-D3HjcMuK.js";import{B as g}from"./_rollupPluginBabelHelpers-3bc641ae-btRFf1Fy.js";import{B as _}from"./input-cx0LjzCS.js";import{L as T}from"./Layout-AyYa8XQx.js";import{T as B,a as H,b as A,c as W,d as E}from"./tab-panels-DHV8yGV0.js";import{S as z}from"./switch-CU8nt3W3.js";/* empty css            */import"./ArrowDown2-DM1rERZ4.js";import"./formik.esm-C9K4NhZh.js";import"./form-label-rj1Y5muO.js";import"./format-DNgEHVKA.js";import"./Clock-6LrARp7T.js";import"./ProfileCircle-DpyEwL7u.js";import"./accordion-panel-C6BP8wfC.js";import"./use-checkbox-fX-NceDq.js";import"./visually-hidden.style-Bfr07Aua.js";function F({defaultValue:s="",onChange:o}){const{t:c}=U(),[n,d]=l.useState(s),p=l.useCallback(i=>{const a=i[0];o(a),d(URL.createObjectURL(a))},[]),{getRootProps:N,getInputProps:m,isDragActive:h}=C({onDrop:p});return e.jsxDEV("div",{"data-is-dragactive":h,...N({className:"border text-secondary-500 border-dashed border-secondary-500 rounded-[6px] p-1 relative h-[120px] data-[is-dragactive=true]:border-primary-500 data-[is-dragactive=true]:border-solid transition-all duration-200 ease-in-out data-[is-dragactive=true]:bg-primary/50"}),children:[e.jsxDEV("input",{...m({className:"absolute top-0 left-0 w-full h-full"})},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/FileUpload.tsx",lineNumber:32,columnNumber:7},this),n?e.jsxDEV("div",{className:"w-full h-full relative rounded-md overflow-hidden",children:e.jsxDEV("img",{src:n,className:"absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 w-full object-cover"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/FileUpload.tsx",lineNumber:35,columnNumber:11},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/FileUpload.tsx",lineNumber:34,columnNumber:9},this):e.jsxDEV("div",{"data-is-dragactive":h,className:"flex items-center justify-center flex-col gap-2.5 py-2.5 p-3 h-full",children:[e.jsxDEV(L,{size:"32",variant:"Bold"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/FileUpload.tsx",lineNumber:45,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm leading-5 font-normal",children:[c("Drag and drop files here or")," ",e.jsxDEV("u",{className:"hover:text-primary-500 hover:cursor-pointer",children:c("upload")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/FileUpload.tsx",lineNumber:48,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/FileUpload.tsx",lineNumber:46,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/FileUpload.tsx",lineNumber:41,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/FileUpload.tsx",lineNumber:25,columnNumber:5},this)}const t=[];for(let s=0;s<256;++s)t.push((s+256).toString(16).slice(1));function O(s,o=0){return(t[s[o+0]]+t[s[o+1]]+t[s[o+2]]+t[s[o+3]]+"-"+t[s[o+4]]+t[s[o+5]]+"-"+t[s[o+6]]+t[s[o+7]]+"-"+t[s[o+8]]+t[s[o+9]]+"-"+t[s[o+10]]+t[s[o+11]]+t[s[o+12]]+t[s[o+13]]+t[s[o+14]]+t[s[o+15]]).toLowerCase()}let D;const $=new Uint8Array(16);function q(){if(!D){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");D=crypto.getRandomValues.bind(crypto)}return D($)}const G=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),V={randomUUID:G};function P(s,o,c){if(V.randomUUID&&!o&&!s)return V.randomUUID();s=s||{};const n=s.random||(s.rng||q)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,O(n)}function J(){const{t:s}=U(),[o,c]=l.useState(!1),[n,d]=l.useState([{uuid:"b6ff05cb-c21c-4cbe-9158-8653518dd171",id:void 0,image:void 0}]),{data:p,isLoading:N}=y("/api/promotions/slider",S,{revalidateOnFocus:!1}),m=l.useCallback(()=>{d(p==null?void 0:p.content.map(i=>{var a;return{id:i.id,uuid:P(),image:void 0,preview:(a=i==null?void 0:i.sliderImage)==null?void 0:a.url}}))},[p]);l.useEffect(()=>{p&&m()},[m]);const h=async()=>{var i,a,b;c(!0);try{const r=new FormData;n.forEach((k,j)=>{r.append(`slider[${j}][id]`,String(k.id||"")),r.append(`slider[${j}][image]`,k.image||"")});const{data:u}=await I.put("/api/promotions/slider",r,{headers:{"Content-Type":"multipart/form-data"}});u!=null&&u.content&&x.success(s("Slider updated successfully"))}catch(r){(b=(a=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:a.messages)!=null&&b[0]?x.error(s(r.response.data.messages[0].message)):x.error(s("Something went wrong"))}finally{c(!1)}};return N?e.jsxDEV("div",{children:e.jsxDEV(w,{},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:78,columnNumber:9},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:77,columnNumber:7},this):e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.map((i,a)=>e.jsxDEV(v,{className:"col-span-1 flex flex-col space-y-2 p-6 bg-white rounded-md shadow-[0px_1px_2px_0px_rgba(0,0,0,0.06),0px_1px_3px_0px_rgba(0,0,0,0.1)]",children:[e.jsxDEV(f,{justify:"space-between",children:[e.jsxDEV("label",{children:[s("Image "),a+1]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:90,columnNumber:13},this),a>0&&e.jsxDEV(g,{variant:"link",colorScheme:"red",className:"text-red-500 font-semibold pr-3",onClick:()=>{d(b=>b.filter(r=>r.uuid!==i.uuid))},children:s("Remove")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:95,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:89,columnNumber:11},this),e.jsxDEV("div",{className:"[&>div]:h-[182px]",children:e.jsxDEV(F,{defaultValue:i.preview||"",onChange:b=>{d(r=>r.map(u=>u.uuid===i.uuid?{...u,image:b}:u))}},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:108,columnNumber:13},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:107,columnNumber:11},this)]},i.uuid,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:85,columnNumber:9},this)),e.jsxDEV(_,{className:"sm:absolute top-0 right-4",children:e.jsxDEV(f,{className:"gap-4",children:[e.jsxDEV(g,{variant:"outline",colorScheme:"primary",className:"border-primary-500 text-primary-500",onClick:()=>{d([...n,{uuid:P(),id:void 0,image:void 0}])},children:[s("Add new slide"),e.jsxDEV(R,{},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:138,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:122,columnNumber:11},this),e.jsxDEV(g,{onClick:h,colorScheme:"primary",className:"bg-primary-400 hover:bg-primary-500",isLoading:o,children:s("Update")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:141,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:121,columnNumber:9},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:120,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Promotions/Slider.tsx",lineNumber:83,columnNumber:5},this)}function pe(){var a,b;const{t:s}=U(),[o,c]=l.useState(!1),[n,d]=l.useState(!1),[p,N]=l.useState(),{data:m,isLoading:h}=y("/api/promotions/welcome",S);l.useEffect(()=>{var r;!h&&m&&d(!!((r=m==null?void 0:m.content)!=null&&r.welcomeStatus))},[m]);const i=async()=>{c(!0);try{const r=new FormData;r.append("type","welcome"),r.append("welcomeImage",p||""),r.append("welcomeStatus",n.toString());const{data:u}=await I.put("/api/promotions",r,{headers:{"Content-Type":"multipart/form-data"}});u.success&&x.success(s(u.message))}catch(r){x.error(s(r.response.data.message||"Failed to update"))}finally{c(!1)}};return e.jsxDEV(T,{title:s("Promotions"),children:e.jsxDEV("div",{className:"p-6 relative",children:e.jsxDEV(B,{children:[e.jsxDEV(v,{className:"justify-between",children:e.jsxDEV(H,{children:[e.jsxDEV(A,{children:s("Slider")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:69,columnNumber:15},this),e.jsxDEV(A,{children:s("Welcome pop-up")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:70,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:68,columnNumber:13},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:67,columnNumber:11},this),e.jsxDEV(W,{children:[e.jsxDEV(E,{children:e.jsxDEV(J,{},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:76,columnNumber:15},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:75,columnNumber:13},this),e.jsxDEV(E,{children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h?e.jsxDEV("div",{children:e.jsxDEV(w,{},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:82,columnNumber:21},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:81,columnNumber:19},this):e.jsxDEV(v,{className:"col-span-1 flex flex-col space-y-2 p-6 bg-white rounded-md shadow-[0px_1px_2px_0px_rgba(0,0,0,0.06),0px_1px_3px_0px_rgba(0,0,0,0.1)]",children:[e.jsxDEV(f,{justify:"space-between",children:[e.jsxDEV("label",{children:s("Image ")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:87,columnNumber:23},this),e.jsxDEV(f,{as:"label",children:[e.jsxDEV("span",{children:"Show Popup"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:89,columnNumber:25},this),e.jsxDEV(z,{isChecked:n,onChange:r=>d(r.target.checked),colorScheme:"green"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:90,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:88,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:86,columnNumber:21},this),e.jsxDEV("div",{className:"[&>div]:h-[182px]",children:e.jsxDEV(F,{defaultValue:((b=(a=m==null?void 0:m.content)==null?void 0:a.welcomeImage)==null?void 0:b.url)||"",onChange:r=>N(r)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:98,columnNumber:23},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:97,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:85,columnNumber:19},this),e.jsxDEV(_,{className:"sm:absolute top-0 right-4",children:e.jsxDEV(f,{className:"gap-4",children:e.jsxDEV(g,{onClick:i,colorScheme:"primary",className:"bg-primary-400 hover:bg-primary-500",isLoading:o,children:s("Update")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:108,columnNumber:21},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:107,columnNumber:19},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:106,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:79,columnNumber:15},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:78,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:74,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:66,columnNumber:9},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:65,columnNumber:7},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/pages/Admin/Promotions.tsx",lineNumber:64,columnNumber:5},this)}export{pe as default};
