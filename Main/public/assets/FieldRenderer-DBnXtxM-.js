import{r as V,u as $,f as G,j as e,b as _,t as F,S as q}from"./app-p3FobzL5.js";import{F as J,b as K,c as g,u as Q,e as X}from"./formik.esm-C9K4NhZh.js";import{z as T,N as P}from"./index-CuMLbxmh.js";import{N as Y}from"./NewCustomerSchema-Bv1JN8aw.js";import{u as Z}from"./useDebounce-C3LzOcPg.js";import{u as j}from"./useTranslation-jbS6ivqO.js";import{F as I,I as v,a as k}from"./input-cx0LjzCS.js";import{H as R,F as ee,A as z}from"./platform_roles-D3HjcMuK.js";import{M as L}from"./Minus-CX-dPmlg.js";import{B as d}from"./_rollupPluginBabelHelpers-3bc641ae-btRFf1Fy.js";import{P as A,a as C,b as y}from"./popover-trigger-D9abZrFQ.js";import{T as x,M as se,a as re,A as te,b as oe,c as ne}from"./ArrowDown2-DM1rERZ4.js";import{P as ie}from"./popover-header-DBc-fTNW.js";import{P as M}from"./popover-body-Cnhf1gCL.js";import{u as me}from"./use-boolean-De0xEA2B.js";import{D as B}from"./index-CTyIfV9B.js";import{C as ae}from"./Calendar-DKjvVyJ0.js";import{A as ue,a as le}from"./ArrowRight2-OjDQz_0a.js";import{f as U}from"./format-DNgEHVKA.js";import{C as ce}from"./Clock-6LrARp7T.js";import{s as de}from"./string_formatter-C0BoQtKC.js";import{F as be}from"./form-label-rj1Y5muO.js";import{I as he}from"./input-group-3FZosNBb.js";import{a as Ne,I as pe}from"./input-addon-B-GPb1QT.js";import{T as fe}from"./textarea-pmQ9KYwB.js";const xe=[{name:"fullName",type:"text",placeholder:"Customer name"},{name:"email",type:"email",placeholder:"Email address"},{name:"phoneNumber",type:"tel",placeholder:"Contact number"},{name:"address",type:"text",placeholder:"Address"}];function De({onSelect:t,toggleCreationMode:u}){const{t:s}=j(),[i,r]=V.useState(),[m,a]=V.useState(!1),[h,c]=V.useState(""),[b,E]=me(),O=Z(h,300),{data:H,isLoading:W}=$(()=>`/api/users?type=customer&search=${O}`,G),S=()=>{u==null||u(!m),a(n=>!n)};return m?e.jsxDEV(J,{initialValues:{fullName:"",email:"",phoneNumber:"",address:""},validationSchema:Y,onSubmit:async(n,l)=>{var D,N,p;l.setSubmitting(!0);const f={fullName:n.fullName,email:n.email,phoneNumber:n.phoneNumber,address:n.address,roleId:6};try{l.setSubmitting(!0);const{data:o}=await _.post("/api/users",f);o!=null&&o.success&&(F.success(s(o==null?void 0:o.message)||s("Customer created successfully")),t==null||t(o.content),r(o.content),a(!1),u==null||u(!1))}catch(o){(N=(D=o==null?void 0:o.response)==null?void 0:D.data)!=null&&N.messages?(p=o.response.data.messages)==null||p.forEach(w=>{l.setFieldError(w.field,s(w.message))}):F.error(o.response.data.message?s(o.response.data.message):s("Something went wrong"))}finally{l.resetForm(),l.setSubmitting(!1)}},children:({isSubmitting:n,submitForm:l})=>e.jsxDEV("div",{className:"flex flex-col gap-y-2",children:[xe.map((f,D)=>e.jsxDEV(K,{name:f.name,children:({field:N,meta:p})=>e.jsxDEV(I,{isInvalid:!!(p.touched&&p.error),children:[e.jsxDEV(R,{className:"space-x-0 gap-0",children:[e.jsxDEV(v,{type:f.type,placeholder:f.placeholder,borderRightRadius:N.name==="fullName"?"0":"md",...N},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:124,columnNumber:23},this),N.name==="fullName"&&e.jsxDEV(k,{"aria-label":"closeCreationForm",onClick:S,className:"rounded-l-none border border-secondary-200",children:e.jsxDEV(L,{},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:136,columnNumber:27},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:131,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:123,columnNumber:21},this),e.jsxDEV(g,{children:s(p.error||"")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:140,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:122,columnNumber:19},this)},D,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:120,columnNumber:15},this)),e.jsxDEV(ee,{className:"w-full justify-end",children:e.jsxDEV(d,{colorScheme:"purple",isLoading:n,type:"button",onClick:l,children:s("Add customer")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:147,columnNumber:15},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:146,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:117,columnNumber:11},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:70,columnNumber:7},this):e.jsxDEV(A,{matchWidth:!0,isOpen:b,onOpen:E.on,onClose:E.off,children:[e.jsxDEV(R,{className:"gap-0",children:[e.jsxDEV(C,{children:e.jsxDEV(d,{variant:"outline",className:"font-normal w-full text-left justify-start rounded-r-none",children:e.jsxDEV(x,{color:i?"inherit":"secondary.500",children:(i==null?void 0:i.fullName)||s("Customer name")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:171,columnNumber:13},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:167,columnNumber:11},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:166,columnNumber:9},this),e.jsxDEV(k,{"aria-label":"addNewCustomer",onClick:S,className:"rounded-l-none border border-secondary-200",children:e.jsxDEV(z,{},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:182,columnNumber:11},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:177,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:165,columnNumber:7},this),e.jsxDEV(y,{className:"w-full",children:[e.jsxDEV(ie,{className:"border-black/[6%]",children:e.jsxDEV(v,{type:"search",placeholder:s("Search..."),value:h,onChange:n=>c(n.target.value),autoFocus:!0},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:187,columnNumber:11},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:186,columnNumber:9},this),e.jsxDEV(M,{className:"flex flex-col items-stretch p-1 max-h-[300px] overflow-y-auto overflow-x-hidden",children:T({isUserLoading:W,users:H}).with({isUserLoading:!0},()=>e.jsxDEV(R,{className:"px-4 py-2.5",children:[e.jsxDEV(q,{size:"sm",color:"secondary.500"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:201,columnNumber:17},this),e.jsxDEV(x,{className:"text-secondary-500",children:[" ",s("Loading...")," "]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:202,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:200,columnNumber:15},this)).with({users:P.not(P.nullish)},({users:n})=>n==null?void 0:n.map(l=>e.jsxDEV(d,{onClick:()=>{r(l),t==null||t(l),E.off()},variant:"ghost",className:"text-left font-normal justify-start",children:l.fullName},l.id,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:209,columnNumber:17},this))).otherwise(()=>e.jsxDEV(x,{className:"text-secondary-500 px-4 py-2.5 text-sm",children:[" ",s("Customer not fount")," "]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:225,columnNumber:15},this))},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:196,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:185,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:164,columnNumber:5},this)}function ve({selected:t,onSelect:u,minDate:s=new Date}){const{t:i}=j();return e.jsxDEV(A,{matchWidth:!0,placement:"bottom-start",children:({onClose:r})=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(C,{children:e.jsxDEV(d,{rightIcon:e.jsxDEV(ae,{size:20},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:32,columnNumber:26},this),variant:"outline",className:"text-left justify-between text-black font-normal w-full bg-transparent border-secondary-200",children:e.jsxDEV(x,{color:t?"":"secondary.500",children:t?U(t,"dd MMM yyyy"):i("Select date")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:36,columnNumber:15},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:31,columnNumber:13},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:30,columnNumber:11},this),e.jsxDEV(y,{className:"max-w-72",children:e.jsxDEV(M,{className:"p-4",children:e.jsxDEV(B,{selected:t,minDate:s,onChange:m=>{u(m),r()},inline:!0,renderCustomHeader:({date:m,decreaseMonth:a,increaseMonth:h,prevMonthButtonDisabled:c,nextMonthButtonDisabled:b})=>e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("span",{className:"text-base font-medium text-secondary-700",children:m&&U(m,"MMM yyyy")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:59,columnNumber:21},this),e.jsxDEV("div",{className:"space-x-2",children:[e.jsxDEV(k,{"aria-label":i("Previous month"),icon:e.jsxDEV(ue,{size:14},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:66,columnNumber:31},this),size:"sm",onClick:a,isDisabled:c,variant:"outline"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:64,columnNumber:23},this),e.jsxDEV(k,{"aria-label":i("Next month"),icon:e.jsxDEV(le,{size:14},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:74,columnNumber:31},this),size:"sm",onClick:h,isDisabled:b,variant:"outline"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:72,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:63,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:58,columnNumber:19},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:43,columnNumber:15},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:42,columnNumber:13},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:41,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:29,columnNumber:9},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/DatePicker.tsx",lineNumber:27,columnNumber:5},this)}function ke({selected:t,onSelect:u,minTime:s,maxTime:i}){const{t:r}=j();return e.jsxDEV(A,{placement:"top-start",isLazy:!0,children:({onClose:m})=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(C,{children:e.jsxDEV(d,{rightIcon:e.jsxDEV(ce,{size:20},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/TimePicker.tsx",lineNumber:23,columnNumber:26},this),variant:"outline",className:"text-left justify-between text-black font-normal w-full border-secondary-200",children:t&&U(t,"hh:mm a")||r("Select date")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/TimePicker.tsx",lineNumber:22,columnNumber:13},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/TimePicker.tsx",lineNumber:21,columnNumber:11},this),e.jsxDEV(y,{className:"p-4 max-w-56",children:e.jsxDEV("div",{className:"relative max-h-64 overflow-y-scroll",children:e.jsxDEV(B,{selected:t,minTime:s,maxTime:i||new Date(0,0,0,23,45),onChange:a=>{u(a),m()},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa",inline:!0},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/TimePicker.tsx",lineNumber:32,columnNumber:15},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/TimePicker.tsx",lineNumber:31,columnNumber:13},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/TimePicker.tsx",lineNumber:30,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/TimePicker.tsx",lineNumber:20,columnNumber:9},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/common/TimePicker.tsx",lineNumber:18,columnNumber:5},this)}function qe({isHidden:t=!1,toggleCreationMode:u,...s}){const{t:i}=j(),[r,m,a]=Q(s),{values:h}=X();return t?null:e.jsxDEV(I,{isInvalid:!!(m.touched&&m.error),children:[s.label&&e.jsxDEV(be,{className:"text-sm text-secondary-500",children:[" ",i(s.label)," "]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:45,columnNumber:9},this),T(s.type).with("customer",()=>e.jsxDEV(De,{toggleCreationMode:u,onSelect:c=>a.setValue(c.id)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:51,columnNumber:11},this)).with("select",()=>{var c;return e.jsxDEV(se,{children:[e.jsxDEV(re,{as:d,rightIcon:e.jsxDEV(te,{},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:61,columnNumber:26},this),variant:"outline",className:"w-full text-left justify-start",children:e.jsxDEV(x,{color:r.value?"inherit":"secondary.400",children:de(i(r.value))},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:65,columnNumber:15},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:59,columnNumber:13},this),e.jsxDEV(oe,{className:"p-1",children:(c=s.options)==null?void 0:c.map(b=>e.jsxDEV(ne,{onClick:()=>a.setValue(b.value),children:b.label},b.value,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:71,columnNumber:17},this))},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:69,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:58,columnNumber:11},this)}).with("numberWithController",()=>e.jsxDEV(he,{children:[e.jsxDEV(Ne,{as:d,onClick:()=>a.setValue(r.value-1),className:"bg-secondary-100",isDisabled:r.value<=1,children:e.jsxDEV(L,{size:24},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:88,columnNumber:15},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:82,columnNumber:13},this),e.jsxDEV(v,{...r,type:"number"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:91,columnNumber:13},this),e.jsxDEV(pe,{as:d,onClick:()=>a.setValue(r.value+1),className:"bg-secondary-100",children:e.jsxDEV(z,{size:24},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:98,columnNumber:15},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:93,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:81,columnNumber:11},this)).with("datepicker",()=>e.jsxDEV(ve,{selected:r.value,onSelect:c=>{a.setValue(c||new Date)}},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:104,columnNumber:11},this)).with("time",()=>e.jsxDEV(ke,{minTime:r.name==="endTime"?h.startTime:new Date(0,0,0,0,0),selected:r.value,onSelect:a.setValue},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:113,columnNumber:11},this)).with("textarea",()=>e.jsxDEV(fe,{...s,...r,className:"focus:shadow-none focus:border-primary-500"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:121,columnNumber:11},this)).with("text","password","email","tel","number",()=>e.jsxDEV(v,{...s,...r},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:124,columnNumber:67},this)).otherwise(()=>null),e.jsxDEV(g,{children:m.error},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:126,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:43,columnNumber:5},this)}export{ve as D,qe as F};
