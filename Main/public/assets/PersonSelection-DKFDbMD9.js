import{r as c,R as E,u as j,f as g,j as e,I as v,S as y,b as D,t as u}from"./app-DV9Enp-g.js";import{u as A}from"./useDebounce-BZ39Q-Ut.js";import{u as O}from"./useTranslation-B_tqir3M.js";import{H as m}from"./platform_roles-C6HFwJ_S.js";import{T as P,U as V}from"./User-nTP7YzRg.js";import{M,a as I,A as w,b as T,T as p,c as k}from"./ArrowDown2-BYk1CnSd.js";import{B as z}from"./_rollupPluginBabelHelpers-3bc641ae-fORsOdMW.js";import{B,I as R}from"./input-BY0aN3Wh.js";function q({data:n,refresh:b}){const{t}=O(),[i,l]=c.useState(()=>n.deliveryMan||{}),[N,f]=E.useState(""),S=A(N,300),{data:o,isLoading:h}=j(`/api/users?type=delivery&search=${S}`,g),x=async(s,r)=>{var d;try{const{data:a}=await D.patch(`/api/orders/${r}`,{deliveryManId:s});(d=a==null?void 0:a.content)!=null&&d.id&&(u.success(t("Order updated successfully")),b())}catch(a){u.error(t(a.response.data.message||"Something went wrong"))}};return c.useEffect(()=>{l(n.deliveryMan||"")},[n]),n.status!=="processing"?e.jsxDEV("div",{className:"flex-1 font-normal text-left border py-2 px-3 rounded-md border-secondary-200 bg-secondary-50",children:e.jsxDEV(m,{children:[e.jsxDEV(v,{as:n.status==="on_delivery"?P:V,size:"sm"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:68,columnNumber:11},this),e.jsxDEV("span",{children:i==null?void 0:i.fullName},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:69,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:67,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:66,columnNumber:7},this):e.jsxDEV(M,{children:[e.jsxDEV(m,{gap:0,children:e.jsxDEV(I,{as:z,size:"md",variant:"outline",onClick:s=>s.stopPropagation(),color:i?"inherit":"secondary.400",bg:"white",fontWeight:"normal",rightIcon:e.jsxDEV(w,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:86,columnNumber:22},this),children:(i==null?void 0:i.fullName)||t("Select delivery man")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:78,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:77,columnNumber:7},this),e.jsxDEV(T,{className:"p-1",children:h?e.jsxDEV(m,{color:"secondary.400",children:[e.jsxDEV(y,{size:"sm"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:94,columnNumber:13},this),e.jsxDEV(p,{fontSize:"sm",color:"secondary.400",py:2,px:3,children:t("Loading...")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:95,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:93,columnNumber:11},this):o.length?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(B,{className:"pb-1 border-b border-black/5",children:e.jsxDEV(R,{type:"search",placeholder:"Search delivery man",onChange:s=>f(s.target.value)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:102,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:101,columnNumber:13},this),o==null?void 0:o.map(s=>e.jsxDEV(k,{onClick:()=>{l(o.find(r=>r.id===s.id)),x(s.id,n.id)},children:s.fullName},s.id,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:111,columnNumber:17},this))]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:100,columnNumber:11},this):e.jsxDEV(p,{fontSize:"sm",color:"secondary.400",py:2,px:3,children:t("No delivery man available")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:126,columnNumber:11},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:91,columnNumber:7},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:76,columnNumber:5},this)}export{q as P};
