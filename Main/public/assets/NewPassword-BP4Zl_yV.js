import{r as t,j as e,S as P,b as A,t as D,a2 as V}from"./app-DV9Enp-g.js";import{C as S}from"./CustomerLayout-Bc5Kc1H7.js";import{F as y,a as C,b as l,c as u}from"./formik.esm-57hcKfmx.js";import{c as I,a as N,f as F}from"./index.esm-DH7tFHsH.js";import{u as k}from"./useTranslation-B_tqir3M.js";import{F as p,I as c}from"./input-BY0aN3Wh.js";import{F as h}from"./form-label-BRtD5jpz.js";import{I as w}from"./input-group-B3tcnjIp.js";import{a as b}from"./input-element-D56J_yd_.js";import{B as r}from"./_rollupPluginBabelHelpers-3bc641ae-fORsOdMW.js";import{T as R}from"./TickCircle-C8Z4cRgD.js";import"./CustomerHeader-Yt-OgDBY.js";import"./validate_required_variants-CWNFFnRe.js";import"./platform_roles-C6HFwJ_S.js";import"./ArrowDown2-BYk1CnSd.js";import"./Minus-hQCtIxHU.js";import"./currency_formatter-Bz1CGAdC.js";import"./use-radio-6sqGZ21b.js";import"./visually-hidden.style-Bfr07Aua.js";import"./index-CuMLbxmh.js";import"./Edit2-BR-gFx13.js";import"./tr-DmrvMSh4.js";import"./radio-BkVBa4kL.js";import"./checkbox-0eFyDNwp.js";import"./use-checkbox-CXyjvu9v.js";import"./popover-trigger-bCcTHQgY.js";import"./divider-ChBlpOfM.js";import"./Trash-D0bDSe0A.js";import"./textarea-7dmbfoGY.js";import"./popover-anchor-BlKiDovh.js";import"./SearchNormal-wibGUap8.js";import"./popover-body-Dv7tL-tk.js";function ce({...d}){const{t:s}=k(),f=new URLSearchParams(window.location.search).get("token"),[x,g]=t.useState(!1),[o,E]=t.useState(!1),[n,j]=t.useState(!1);if(t.useEffect(()=>{d.auth&&(window.location.href="/")},[]),d.auth)return e.jsxDEV("div",{className:"w-screen h-screen flex items-center justify-center",children:e.jsxDEV(P,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:38,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:37,columnNumber:7},this);const v=()=>{V.visit("/login",{preserveScroll:!1})};return e.jsxDEV(S,{children:e.jsxDEV("div",{className:"py-14 px-4",children:e.jsxDEV("div",{className:"max-w-[600px] mx-auto bg-white py-12 px-16 rounded-2xl shadow-auth",children:x?e.jsxDEV("div",{className:"flex flex-col items-center justify-center text-center gap-2",children:[e.jsxDEV(R,{size:164,className:"text-primary-400",variant:"Bulk"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:153,columnNumber:15},this),e.jsxDEV("h2",{className:"text-2xl font-semibold text-center",children:s("Successful")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:154,columnNumber:15},this),e.jsxDEV("p",{className:"text-center mb-6",children:s("We've reset your password. Sign in again.")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:155,columnNumber:15},this),e.jsxDEV(r,{onClick:v,variant:"solid",colorScheme:"primary",className:"button-primary",children:s("SIGN IN")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:156,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:152,columnNumber:13},this):e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-semibold text-center mb-2",children:s("Create a new password")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:52,columnNumber:15},this),e.jsxDEV("p",{className:"text-center mb-8",children:s("Set a new password and you're good to go!")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:55,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV(y,{initialValues:{password:"",confirmPassword:"",token:f},onSubmit:async(m,i)=>{try{i.setSubmitting(!0);const{data:a}=await A.post("/api/auth/reset-password",m);a.success&&g(!0)}catch(a){D.error(s(a.response.data.message||"Invalid Credentials"))}finally{i.setSubmitting(!1)}},validationSchema:I().shape({password:N().min(8,"Password must be at least 8 characters").required("Password is required"),confirmPassword:N().required("Confirm password is required").oneOf([F("password")],"Passwords must match")}),children:({isSubmitting:m})=>e.jsxDEV(C,{className:"space-y-4",children:[e.jsxDEV(l,{name:"password",children:({field:i,form:a})=>e.jsxDEV(p,{isInvalid:a.errors.password&&a.touched.password,children:[e.jsxDEV(h,{children:s("Password")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:90,columnNumber:29},this),e.jsxDEV(w,{size:"md",children:[e.jsxDEV(c,{...i,pr:"4.5rem",type:o?"text":"password",placeholder:s("New password")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:92,columnNumber:31},this),e.jsxDEV(b,{width:"4.5rem",children:e.jsxDEV(r,{h:"1.75rem",size:"sm",onClick:()=>E(!o),children:s(o?"Hide":"Show")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:99,columnNumber:33},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:98,columnNumber:31},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:91,columnNumber:29},this),e.jsxDEV(u,{children:s(a.errors.password)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:104,columnNumber:29},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:89,columnNumber:27},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:87,columnNumber:23},this),e.jsxDEV(l,{name:"confirmPassword",children:({field:i,form:a})=>e.jsxDEV(p,{isInvalid:a.errors.confirmPassword&&a.touched.confirmPassword,children:[e.jsxDEV(h,{children:s("Confirm Password")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:113,columnNumber:29},this),e.jsxDEV(w,{size:"md",children:[e.jsxDEV(c,{...i,pr:"4.5rem",type:n?"text":"password",placeholder:s("Confirm new password")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:115,columnNumber:31},this),e.jsxDEV(b,{width:"4.5rem",children:e.jsxDEV(r,{h:"1.75rem",size:"sm",onClick:()=>j(!n),children:s(n?"Hide":"Show")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:122,columnNumber:33},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:121,columnNumber:31},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:114,columnNumber:29},this),e.jsxDEV(u,{children:s(a.errors.confirmPassword)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:131,columnNumber:29},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:110,columnNumber:27},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:108,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV(r,{isLoading:m,type:"submit",variant:"solid",colorScheme:"primary",className:"button-primary",children:s("CREATE PASSWORD")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:136,columnNumber:25},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:135,columnNumber:23},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:86,columnNumber:21},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:57,columnNumber:17},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:56,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:51,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:49,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:48,columnNumber:7},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/NewPassword.tsx",lineNumber:47,columnNumber:5},this)}export{ce as default};
