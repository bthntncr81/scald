import{r as d,X as xe,u as ne,f as de,j as e,S as q,M as fe,a as ve,t as R,b as he}from"./app-DV9Enp-g.js";import{u as ge,L as Ae}from"./Layout-4Yl3SVGs.js";import{U as je,O as ee}from"./OrderCard-B8yAYG60.js";import{z as J,N as T}from"./index-CuMLbxmh.js";import{s as S}from"./string_formatter-C0BoQtKC.js";import{c as j}from"./currency_formatter-Bz1CGAdC.js";import{O as Ee,P as De}from"./PrintInvoice-D4UWVblX.js";import{O as Oe}from"./order_status-CM2aeLIm.js";import{D as Ve}from"./DiscountTypeSelect-DQGXDPdn.js";import{u as oe}from"./useTranslation-B_tqir3M.js";import{H as E,F as Se,B as ye,D as we,a as Ce}from"./platform_roles-C6HFwJ_S.js";import{T as t,M as W,a as $,A as G,b as _,c as H}from"./ArrowDown2-BYk1CnSd.js";import{B as v}from"./_rollupPluginBabelHelpers-3bc641ae-fORsOdMW.js";import{B as y,I as le}from"./input-BY0aN3Wh.js";import{S as ke}from"./switch-B97T3cky.js";import{D as ie}from"./divider-ChBlpOfM.js";import{T as Te}from"./textarea-7dmbfoGY.js";import{u as Pe}from"./useDebounce-BZ39Q-Ut.js";import{T as Le,a as ze,b as w,c as Be,d as C}from"./tab-panels-vLnb1L73.js";import{I as Me}from"./input-group-B3tcnjIp.js";import{I as Ue}from"./input-element-D56J_yd_.js";import{S as Fe}from"./SearchNormal-wibGUap8.js";import{A as Re,a as se,b as ae,c as te,d as re}from"./accordion-panel-Bmo1-bWf.js";import"./formik.esm-57hcKfmx.js";import"./form-label-BRtD5jpz.js";import"./format-DNgEHVKA.js";import"./Clock-DOUKTfsE.js";import"./ProfileCircle-kDGWjsR6.js";import"./User-nTP7YzRg.js";import"./tr-DmrvMSh4.js";import"./popover-trigger-bCcTHQgY.js";import"./generate_invoice-stSZ9ez8.js";import"./use-radio-6sqGZ21b.js";import"./visually-hidden.style-Bfr07Aua.js";import"./use-checkbox-CXyjvu9v.js";const X=new Oe;function We({isOpen:r,orderId:h,refresh:g,onClose:D,isValidating:P}){const{t:a}=oe(),[n,O]=d.useState(X.getStatusDetails("pending")),[u,V]=d.useState(""),[p,k]=d.useState(),[x,m]=d.useState(),[b,f]=d.useState(),[L,me]=d.useState(""),[ce,K]=d.useState(!1),[z,ue]=d.useState([]),[B,M]=d.useState(0),[c,A]=d.useState({type:"amount",value:0,show:!1}),{props:{branding:U}}=xe(),be=ge(),{data:o,isLoading:F,mutate:Q}=ne(()=>h?`/api/orders/${h}`:null,de);d.useEffect(()=>{Q()},[P]),d.useEffect(()=>{var s;const i=[];(s=o==null?void 0:o.orderCharges)==null||s.forEach(l=>{let N=0;N+=l.amount;const I=i.findIndex(pe=>pe.name===l.name);I===-1?i.push({...l,amount:N}):i[I].amount+=N}),ue(i)},[o]);const Y=d.useCallback(()=>{!F&&o&&(A({show:!1,type:"amount",value:o.manualDiscount}),M(o.manualDiscount),O(X.getStatusDetails(o.status)),k(o.type),V(o.customerNote??""),m(o.paymentType),me(new Date(o.deliveryDate).toISOString().split("T")[0]),f(!!o.paymentStatus))},[o,F]);d.useEffect(()=>{Y()},[Y]);const Ne=async i=>{var l;if(i.type==="delivery"&&(n.value==="on_delivery"||n.value==="completed")&&!i.deliveryManId){R.error(a("Select delivery person first"));return}const s={userId:i.userId,type:p,manualDiscount:B,discountType:c.type,paymentType:x,customerNote:u,paymentStatus:b,deliveryDate:L,status:n.value};K(!0);try{const{data:N}=await he.put(`/api/orders/${i.id}`,s);(l=N==null?void 0:N.content)!=null&&l.id&&(g(),Q(),R.success(a("Order updated successfully")))}catch(N){R.error(a(N.response.data.message)||a("Something went wrong"))}finally{K(!1)}},Z=e.jsxDEV("div",{className:"relative w-full grid grid-rows-[1fr,9rem] h-screen lg:h-[calc(100vh-76px)] bg-white border-l border-black/10",children:J({orderItem:o,isLoading:F}).with({isLoading:!0},()=>e.jsxDEV(E,{justify:"center",height:"200px",children:[e.jsxDEV(q,{size:"sm"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:181,columnNumber:13},this),e.jsxDEV(t,{className:"text-secondary-500",children:a("Loading...")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:182,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:180,columnNumber:11},this)).with({orderItem:null,isLoading:!1},()=>e.jsxDEV(t,{className:"py-6 px-4 text-secondary-500",children:a("Order not found")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:188,columnNumber:11},this)).otherwise(({orderItem:i})=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"px-4 py-6 pb-6 flex-1 lg:h-[calc(100vh-220px)] overflow-y-auto",children:[e.jsxDEV("div",{className:"order-details-container",children:[e.jsxDEV(t,{as:"h3",className:"font-medium text-xl text-secondary-600 mb-6",children:a("Order details")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:196,columnNumber:17},this),e.jsxDEV("div",{className:"order-details-grid md:gap-[30px]",children:[e.jsxDEV("div",{className:"lg:w-fit flex flex-col gap-1 pb-[30px] lg:border-b border-black/5",children:[e.jsxDEV(t,{className:"text-base font-normal text-secondary-400",children:a("Order number")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:204,columnNumber:21},this),e.jsxDEV(t,{as:"h3",className:"text-secondary-600 text-xl font-semibold",children:i==null?void 0:i.orderNumber},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:207,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:203,columnNumber:19},this),e.jsxDEV("div",{className:"md:w-fit flex flex-col gap-1 pb-[30px] border-b border-black/5",children:[e.jsxDEV(t,{className:"text-base font-normal text-secondary-400",children:a("Order type")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:214,columnNumber:21},this),n.value==="pending"?e.jsxDEV(W,{children:[e.jsxDEV($,{as:v,variant:"outline",rightIcon:e.jsxDEV(G,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:223,columnNumber:38},this),onClick:s=>s.stopPropagation(),isDisabled:(i==null?void 0:i.userId)===null,children:a(S(p))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:220,columnNumber:25},this),e.jsxDEV(_,{className:"p-1",children:["dine_in","delivery","pickup"].map(s=>{var l;return!!((l=U==null?void 0:U.business)!=null&&l[s])&&e.jsxDEV(H,{onClick:()=>k(s),children:a(S(s))},s,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:235,columnNumber:33},this)})},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:229,columnNumber:25},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:219,columnNumber:23},this):e.jsxDEV(y,{className:"w-fit border border-secondary-200 px-4 py-2 rounded-md h-10",children:a(S(p))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:246,columnNumber:23},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:213,columnNumber:19},this),e.jsxDEV("div",{className:"md:w-fit flex flex-col gap-1 pb-[30px] border-b border-black/5",children:[e.jsxDEV(t,{className:"text-base font-normal text-secondary-400",children:a("Status")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:254,columnNumber:21},this),e.jsxDEV(W,{children:[e.jsxDEV($,{as:v,variant:"outline",color:n==null?void 0:n.fgColor,borderColor:n==null?void 0:n.fgColor,rightIcon:e.jsxDEV(G,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:262,columnNumber:36},this),onClick:s=>s.stopPropagation(),children:a(n==null?void 0:n.label)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:257,columnNumber:23},this),e.jsxDEV(_,{className:"p-1",children:X.all().map((s,l)=>(!s.orderType||p===s.orderType)&&e.jsxDEV(H,{color:s.fgColor,onClick:()=>O(s),children:a(s.label)},l,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:271,columnNumber:31},this))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:267,columnNumber:23},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:256,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:253,columnNumber:19},this),e.jsxDEV("div",{className:"md:w-fit flex flex-col gap-1",children:[e.jsxDEV(t,{className:"text-base font-normal text-secondary-400",children:a("Delivery date")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:282,columnNumber:21},this),e.jsxDEV(t,{as:"h3",className:"text-secondary-600 text-xl font-semibold",children:new Date(i==null?void 0:i.deliveryDate).toLocaleDateString()},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:285,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:281,columnNumber:19},this),e.jsxDEV("div",{className:"md:w-fit flex flex-col gap-1",children:[e.jsxDEV(t,{className:"text-base font-normal text-secondary-400",children:a("Payment method")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:292,columnNumber:21},this),e.jsxDEV(W,{children:[e.jsxDEV($,{as:v,variant:"outline",rightIcon:e.jsxDEV(G,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:300,columnNumber:36},this),onClick:s=>s.stopPropagation(),children:a(S(x))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:297,columnNumber:23},this),e.jsxDEV(_,{children:["cash","card"].map(s=>e.jsxDEV(H,{onClick:()=>m(s),children:a(S(s))},s,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:307,columnNumber:27},this))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:305,columnNumber:23},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:296,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:291,columnNumber:19},this),e.jsxDEV("div",{className:"md:w-fit flex flex-col gap-1",children:[e.jsxDEV(t,{className:"text-base font-normal text-secondary-400",children:a("Payment status")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:317,columnNumber:21},this),e.jsxDEV(Se,{justifyContent:"space-between",alignItems:"center",className:"text-secondary-600 text-xl font-semibold",children:[b!==void 0&&e.jsxDEV(ke,{colorScheme:"green",size:"lg",isChecked:b,onChange:s=>f(s.target.checked)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:326,columnNumber:25},this),e.jsxDEV(ye,{variant:"solid",colorScheme:b?"green":"orange",size:"sm",className:"py-0 leading-5 min-h-fit",children:a(b?"Paid":"Unpaid")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:333,columnNumber:23},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:320,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:316,columnNumber:19},this),(i==null?void 0:i.type)==="delivery"&&(i==null?void 0:i.status)!=="pending"&&e.jsxDEV("div",{className:"col-span-2",children:e.jsxDEV("div",{className:"flex flex-col gap-1",children:[e.jsxDEV(t,{className:"text-base font-normal text-secondary-400",children:a("Delivery person")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:348,columnNumber:25},this),e.jsxDEV(je,{type:i.type,deliveryPerson:i==null?void 0:i.deliveryMan,status:i.status,orderId:i==null?void 0:i.id,refresh:g},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:352,columnNumber:25},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:347,columnNumber:23},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:346,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:201,columnNumber:17},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:195,columnNumber:15},this),e.jsxDEV(ie,{className:"border-black/5"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:365,columnNumber:15},this),e.jsxDEV("div",{className:"mt-3 mb-4",children:e.jsxDEV("div",{className:"flex flex-col space-y-2",children:[e.jsxDEV(t,{className:"text-base font-normal text-secondary-400",children:a("Order note")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:370,columnNumber:19},this),n.value!=="pending"?e.jsxDEV(t,{children:u||e.jsxDEV("span",{className:"text-secondary-500",children:[" ",a("Empty")]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:375,columnNumber:40},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:374,columnNumber:21},this):e.jsxDEV(Te,{value:u,onChange:s=>V(s.target.value),placeholder:a("Write customer note")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:378,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:369,columnNumber:17},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:368,columnNumber:15},this),e.jsxDEV(Ee,{items:i==null?void 0:i.orderItems},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:388,columnNumber:15},this),e.jsxDEV("div",{className:"mt-4 flex flex-col gapy-2 [&>div]:border-b [&>div]:border-black/5 [&>div]:py-1 [&>div]:px-4",children:[e.jsxDEV("div",{className:"grid grid-cols-[1fr,150px] text-lg",children:[e.jsxDEV("div",{children:[" ",a("Subtotal"),": "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:393,columnNumber:19},this),e.jsxDEV("h4",{className:"font-medium text-right",children:j(i==null?void 0:i.total)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:394,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:392,columnNumber:17},this),z==null?void 0:z.map(s=>e.jsxDEV("div",{className:"grid grid-cols-[1fr,150px] text-lg",children:[e.jsxDEV("div",{children:[s==null?void 0:s.name,": "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:402,columnNumber:21},this),e.jsxDEV("h4",{className:"font-medium text-right",children:j(s==null?void 0:s.amount)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:403,columnNumber:21},this)]},s.id,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:401,columnNumber:19},this)),(i==null?void 0:i.type)==="delivery"&&e.jsxDEV("div",{className:"grid grid-cols-[1fr,150px] text-lg",children:[e.jsxDEV("div",{children:[" ",a("Delivery charge"),": "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:411,columnNumber:21},this),e.jsxDEV("h4",{className:"font-medium text-right",children:j(i==null?void 0:i.deliveryCharge)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:412,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:410,columnNumber:19},this),e.jsxDEV("div",{className:"grid grid-cols-[1fr,150px] text-lg",children:[e.jsxDEV("div",{children:[" ",a("Discount"),": "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:420,columnNumber:19},this),e.jsxDEV("h4",{className:"font-medium text-right",children:["- ",j(i==null?void 0:i.discount)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:421,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:419,columnNumber:17},this),e.jsxDEV(y,{as:"div",className:"grid grid-cols-[1fr,100px] border-b py-1.5 border-black/5 text-lg",children:[e.jsxDEV(y,{className:"flex flex-wrap @xs:flex-nowrap items-center gap-3",children:[a("Extra Discount"),":",!c.show&&e.jsxDEV(v,{size:"sm",className:"px-3",onClick:()=>A({...c,show:!0}),children:a(c.value===0?a("Add Discount"):a("Edit Discount"))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:434,columnNumber:23},this),c.show&&e.jsxDEV(v,{size:"sm",className:"px-3",onClick:()=>{A({...c,value:0,show:!1})},children:a("Remove Discount")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:443,columnNumber:23},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:431,columnNumber:19},this),e.jsxDEV(t,{fontWeight:500,textAlign:"right",children:["- ",j(B)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:454,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:427,columnNumber:17},this),c.show&&e.jsxDEV(y,{as:"div",className:"grid grid-cols-[1fr,100px] gap-4 pt-2",children:[e.jsxDEV(E,{className:"flex gap-3",children:[e.jsxDEV(E,{children:e.jsxDEV(Ve,{onChange:s=>A(l=>({...l,type:s}))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:462,columnNumber:25},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:461,columnNumber:23},this),e.jsxDEV(le,{type:"number",value:c.value,onChange:s=>A(l=>({...l,value:+s.target.value})),placeholder:a("Add discount"),onFocus:s=>s.target.select()},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:471,columnNumber:23},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:460,columnNumber:21},this),e.jsxDEV(v,{variant:"outline",colorScheme:"blue",type:"button",onClick:()=>{A(s=>({...s,show:!1})),c.type==="percentage"?M(i.total*c.value*.01):M(c.value)},children:a("Update")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:481,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:459,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:390,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:194,columnNumber:13},this),e.jsxDEV(y,{px:"4",pt:"2",pb:"4",shadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.06),0px -1px 3px 0px rgba(0, 0, 0, 0.1)",className:"absolute w-full h-36 bottom-0 bg-white z-10 flex flex-col justify-center gap-5",children:[e.jsxDEV("div",{className:"grid grid-cols-[1fr,150px] text-lg px-4",children:[e.jsxDEV("div",{children:[" ",a("Grand total"),": "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:508,columnNumber:17},this),e.jsxDEV("h4",{className:"font-bold text-right",children:j((i==null?void 0:i.grandTotal)-(B-i.manualDiscount))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:509,columnNumber:17},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:507,columnNumber:15},this),e.jsxDEV(ie,{className:"border-black/5"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:515,columnNumber:15},this),e.jsxDEV(E,{className:"w-full gap-2 px-4",children:[e.jsxDEV(v,{onClick:D,variant:"outline",className:"flex-1",children:a("Close")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:518,columnNumber:17},this),e.jsxDEV(De,{orderId:i.id},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:521,columnNumber:17},this),e.jsxDEV(v,{type:"button",onClick:()=>Ne(i),colorScheme:"blue",className:"flex-1",isLoading:ce,children:a("Update")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:522,columnNumber:17},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:517,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:500,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:193,columnNumber:11},this))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:176,columnNumber:5},this);if(be.width<992)return e.jsxDEV(we,{isOpen:r,placement:"right",size:"md",onClose:D,children:[e.jsxDEV(fe,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:542,columnNumber:9},this),e.jsxDEV(Ce,{className:"p-0",children:e.jsxDEV(ve,{className:"p-0 h-screen",children:Z},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:544,columnNumber:11},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:543,columnNumber:9},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/ActiveOrders/OrderDetailsSidebar.tsx",lineNumber:541,columnNumber:7},this);if(r)return Z}function Ei(){const{t:r}=oe(),[h,g]=d.useState(!1),[D,P]=d.useState(""),a=Pe(D,300),[n,O]=d.useState(),{data:u,isLoading:V,mutate:p,isValidating:k}=ne(`/api/orders?search=${a}&listType=active`,de),x=m=>e.jsxDEV("div",{className:"order-card-container",children:J({orderItems:u,isLoading:V}).with({isLoading:!0},()=>e.jsxDEV(E,{height:"200px",justifyContent:"center",children:[e.jsxDEV(q,{size:"sm"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:50,columnNumber:15},this),e.jsxDEV(t,{children:r("Loading...")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:51,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:49,columnNumber:13},this)).with({orderItems:T.not(T.nullish)},()=>{const b=u.filter(f=>f.status===m);return b.length?e.jsxDEV("div",{className:"order-card-grid",children:b.map(f=>f.status===m&&e.jsxDEV(ee,{refresh:p,onClick:L=>{O(L),g(!0)},data:f},f.id,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:65,columnNumber:23},this))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:61,columnNumber:15},this):e.jsxDEV(t,{className:"text-secondary-500",children:[" ",r("No orders available")," "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:58,columnNumber:22},this)}).otherwise(()=>e.jsxDEV(t,{className:"text-secondary-500",children:[" ",r("No orders available")," "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:80,columnNumber:13},this))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:46,columnNumber:7},this);return e.jsxDEV(Ae,{title:r("Active orders"),children:e.jsxDEV("div",{className:`grid ${h?"grid-cols-2":"grid-cols-1"} @container justify-between`,children:[e.jsxDEV("div",{className:"h-[calc(100vh-76px)] w-full p-6 overflow-y-scroll",children:e.jsxDEV(Le,{children:[e.jsxDEV("div",{className:"flex flex-col @3xl:flex-row @3xl:items-center justify-between gap-4",children:[e.jsxDEV("div",{className:"flex-1 max-w-full overflow-x-auto",children:e.jsxDEV(ze,{className:"flex whitespace-nowrap",children:[e.jsxDEV(w,{children:r("All")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:94,columnNumber:19},this),e.jsxDEV(w,{children:r("Pending")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:95,columnNumber:19},this),e.jsxDEV(w,{children:r("Processing")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:96,columnNumber:19},this),e.jsxDEV(w,{children:r("Ready")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:97,columnNumber:19},this),e.jsxDEV(w,{children:r("On delivery")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:98,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:93,columnNumber:17},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:92,columnNumber:15},this),!h&&e.jsxDEV("div",{className:"max-w-[300px]",children:e.jsxDEV(Me,{children:[e.jsxDEV(Ue,{pointerEvents:"none",children:e.jsxDEV(Fe,{size:18},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:105,columnNumber:23},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:104,columnNumber:21},this),e.jsxDEV(le,{type:"search",value:D,onChange:m=>P(m.target.value),placeholder:r("Search"),className:"bg-white"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:107,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:103,columnNumber:19},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:102,columnNumber:17},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:91,columnNumber:13},this),e.jsxDEV(Be,{children:[e.jsxDEV(C,{children:e.jsxDEV(Re,{defaultIndex:[0,1],allowMultiple:!0,children:[e.jsxDEV(se,{border:0,children:[e.jsxDEV(ae,{className:"flex items-center justify-between border-b border-black/10",children:[e.jsxDEV("p",{className:"font-medium pb-1",children:r("Pending")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:124,columnNumber:23},this),e.jsxDEV(te,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:125,columnNumber:23},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:123,columnNumber:21},this),e.jsxDEV(re,{className:"px-1",children:x("pending")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:127,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:122,columnNumber:19},this),e.jsxDEV(se,{border:0,children:[e.jsxDEV(ae,{className:"flex items-center justify-between border-b border-black/10",children:[e.jsxDEV("p",{className:"font-medium pb-1",children:r("Others")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:131,columnNumber:23},this),e.jsxDEV(te,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:132,columnNumber:23},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:130,columnNumber:21},this),e.jsxDEV(re,{className:"px-1 order-card-container",children:J({orderItems:u,isLoading:V}).with({isLoading:!0},()=>e.jsxDEV(E,{height:"200px",justifyContent:"center",children:[e.jsxDEV(q,{size:"sm"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:138,columnNumber:29},this),e.jsxDEV(t,{children:r("Loading...")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:139,columnNumber:29},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:137,columnNumber:27},this)).with({orderItems:T.not(T.nullish)},()=>e.jsxDEV("div",{className:"order-card-grid",children:u.map(m=>m.status!=="pending"&&e.jsxDEV(ee,{refresh:()=>p(u),onClick:b=>{O(b),g(!0)},data:m},m.id,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:147,columnNumber:35},this))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:143,columnNumber:27},this)).otherwise(()=>e.jsxDEV(t,{className:"text-secondary-400",children:[" ",r("No pending orders")," "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:161,columnNumber:27},this))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:134,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:129,columnNumber:19},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:121,columnNumber:17},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:120,columnNumber:15},this),e.jsxDEV(C,{children:x("pending")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:167,columnNumber:15},this),e.jsxDEV(C,{children:x("processing")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:168,columnNumber:15},this),e.jsxDEV(C,{children:x("ready")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:169,columnNumber:15},this),e.jsxDEV(C,{children:x("on_delivery")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:170,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:119,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:90,columnNumber:11},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:89,columnNumber:9},this),n&&e.jsxDEV(We,{isValidating:k,isOpen:h,onClose:()=>g(!1),orderId:n,refresh:()=>p(u)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:176,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:88,columnNumber:7},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Admin/ActiveOrders.tsx",lineNumber:87,columnNumber:5},this)}export{Ei as default};
