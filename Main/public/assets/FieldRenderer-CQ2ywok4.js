import{r as V,u as $,f as G,j as e,b as _,t as F,S as q}from"./app-DV9Enp-g.js";import{F as J,b as K,c as T,u as Q,e as X}from"./formik.esm-57hcKfmx.js";import{z as I,N as P}from"./index-CuMLbxmh.js";import{N as Y}from"./NewCustomerSchema-C2AlfYyz.js";import{u as Z}from"./useDebounce-BZ39Q-Ut.js";import{u as D}from"./useTranslation-B_tqir3M.js";import{F as z,I as v,a as E}from"./input-BY0aN3Wh.js";import{H as R,F as ee,A as L}from"./platform_roles-C6HFwJ_S.js";import{M}from"./Minus-hQCtIxHU.js";import{B as u}from"./_rollupPluginBabelHelpers-3bc641ae-fORsOdMW.js";import{P as C,a as y,b as S}from"./popover-trigger-bCcTHQgY.js";import{T as x,M as se,a as ie,A as te,b as ne,c as oe}from"./ArrowDown2-BYk1CnSd.js";import{P as ae}from"./popover-header-BFLhNdCb.js";import{P as B}from"./popover-body-Dv7tL-tk.js";import{u as re}from"./use-boolean-S__THBuA.js";import{D as O}from"./index-sP33oPgb.js";import{C as me}from"./Calendar-DOPv7dkO.js";import{A as le,a as de}from"./ArrowRight2-Cm1MJeQW.js";import{f as A}from"./format-DNgEHVKA.js";import{C as ce}from"./Clock-DOUKTfsE.js";import{s as ue}from"./string_formatter-C0BoQtKC.js";import{F as be}from"./form-label-BRtD5jpz.js";import{I as Ne}from"./input-group-B3tcnjIp.js";import{a as pe,I as fe}from"./input-addon-BXuOB8U6.js";import{T as he}from"./textarea-7dmbfoGY.js";const xe=[{name:"fullName",type:"text",placeholder:"Customer name"},{name:"email",type:"email",placeholder:"Email address"},{name:"phoneNumber",type:"tel",placeholder:"Contact number"},{name:"address",type:"text",placeholder:"Address"}];function je({onSelect:t,toggleCreationMode:l}){const{t:s}=D(),[a,i]=V.useState(),[r,m]=V.useState(!1),[N,c]=V.useState(""),[b,g]=re(),H=Z(N,300),{data:W,isLoading:U}=$(()=>`/api/users?type=customer&search=${H}`,G),k=()=>{l==null||l(!r),m(o=>!o)};return r?e.jsxDEV(J,{initialValues:{fullName:"",email:"",phoneNumber:"",address:""},validationSchema:Y,onSubmit:async(o,d)=>{var j,p,f;d.setSubmitting(!0);const h={fullName:o.fullName,email:o.email,phoneNumber:o.phoneNumber,address:o.address,roleId:6};try{d.setSubmitting(!0);const{data:n}=await _.post("/api/users",h);n!=null&&n.success&&(F.success(s(n==null?void 0:n.message)||s("Customer created successfully")),t==null||t(n.content),i(n.content),m(!1),l==null||l(!1))}catch(n){(p=(j=n==null?void 0:n.response)==null?void 0:j.data)!=null&&p.messages?(f=n.response.data.messages)==null||f.forEach(w=>{d.setFieldError(w.field,s(w.message))}):F.error(n.response.data.message?s(n.response.data.message):s("Something went wrong"))}finally{d.resetForm(),d.setSubmitting(!1)}},children:({isSubmitting:o,submitForm:d})=>e.jsxDEV("div",{className:"flex flex-col gap-y-2",children:[xe.map((h,j)=>e.jsxDEV(K,{name:h.name,children:({field:p,meta:f})=>e.jsxDEV(z,{isInvalid:!!(f.touched&&f.error),children:[e.jsxDEV(R,{className:"space-x-0 gap-0",children:[e.jsxDEV(v,{type:h.type,placeholder:h.placeholder,borderRightRadius:p.name==="fullName"?"0":"md",...p},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:124,columnNumber:23},this),p.name==="fullName"&&e.jsxDEV(E,{"aria-label":"closeCreationForm",onClick:k,className:"rounded-l-none border border-secondary-200",children:e.jsxDEV(M,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:136,columnNumber:27},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:131,columnNumber:25},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:123,columnNumber:21},this),e.jsxDEV(T,{children:s(f.error||"")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:140,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:122,columnNumber:19},this)},j,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:120,columnNumber:15},this)),e.jsxDEV(ee,{className:"w-full justify-end",children:e.jsxDEV(u,{colorScheme:"purple",isLoading:o,type:"button",onClick:d,children:s("Add customer")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:147,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:146,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:117,columnNumber:11},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:70,columnNumber:7},this):e.jsxDEV(C,{matchWidth:!0,isOpen:b,onOpen:g.on,onClose:g.off,children:[e.jsxDEV(R,{className:"gap-0",children:[e.jsxDEV(y,{children:e.jsxDEV(u,{variant:"outline",className:"font-normal w-full text-left justify-start rounded-r-none",children:e.jsxDEV(x,{color:a?"inherit":"secondary.500",children:(a==null?void 0:a.fullName)||s("Customer name")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:171,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:167,columnNumber:11},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:166,columnNumber:9},this),e.jsxDEV(E,{"aria-label":"addNewCustomer",onClick:k,className:"rounded-l-none border border-secondary-200",children:e.jsxDEV(L,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:182,columnNumber:11},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:177,columnNumber:9},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:165,columnNumber:7},this),e.jsxDEV(S,{className:"w-full",children:[e.jsxDEV(ae,{className:"border-black/[6%]",children:e.jsxDEV(v,{type:"search",placeholder:s("Search..."),value:N,onChange:o=>c(o.target.value),autoFocus:!0},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:187,columnNumber:11},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:186,columnNumber:9},this),e.jsxDEV(B,{className:"flex flex-col items-stretch p-1 max-h-[300px] overflow-y-auto overflow-x-hidden",children:I({isUserLoading:U,users:W}).with({isUserLoading:!0},()=>e.jsxDEV(R,{className:"px-4 py-2.5",children:[e.jsxDEV(q,{size:"sm",color:"secondary.500"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:201,columnNumber:17},this),e.jsxDEV(x,{className:"text-secondary-500",children:[" ",s("Loading...")," "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:202,columnNumber:17},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:200,columnNumber:15},this)).with({users:P.not(P.nullish)},({users:o})=>o==null?void 0:o.map(d=>e.jsxDEV(u,{onClick:()=>{i(d),t==null||t(d),g.off()},variant:"ghost",className:"text-left font-normal justify-start",children:d.fullName},d.id,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:209,columnNumber:17},this))).otherwise(()=>e.jsxDEV(x,{className:"text-secondary-500 px-4 py-2.5 text-sm",children:[" ",s("Customer not fount")," "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:225,columnNumber:15},this))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:196,columnNumber:9},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:185,columnNumber:7},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/CustomerSelection.tsx",lineNumber:164,columnNumber:5},this)}function ve({selected:t,onSelect:l,minDate:s=new Date}){const{t:a}=D();return e.jsxDEV(C,{matchWidth:!0,placement:"bottom-start",children:({onClose:i})=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(y,{children:e.jsxDEV(u,{rightIcon:e.jsxDEV(me,{size:20},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:32,columnNumber:26},this),variant:"outline",className:"text-left justify-between text-black font-normal w-full bg-transparent border-secondary-200",children:e.jsxDEV(x,{color:t?"":"secondary.500",children:t?A(t,"dd MMM yyyy"):a("Select date")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:36,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:31,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:30,columnNumber:11},this),e.jsxDEV(S,{className:"max-w-72",children:e.jsxDEV(B,{className:"p-4",children:e.jsxDEV(O,{selected:t,minDate:s,onChange:r=>{l(r),i()},inline:!0,renderCustomHeader:({date:r,decreaseMonth:m,increaseMonth:N,prevMonthButtonDisabled:c,nextMonthButtonDisabled:b})=>e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("span",{className:"text-base font-medium text-secondary-700",children:r&&A(r,"MMM yyyy")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:59,columnNumber:21},this),e.jsxDEV("div",{className:"space-x-2",children:[e.jsxDEV(E,{"aria-label":a("Previous month"),icon:e.jsxDEV(le,{size:14},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:66,columnNumber:31},this),size:"sm",onClick:m,isDisabled:c,variant:"outline"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:64,columnNumber:23},this),e.jsxDEV(E,{"aria-label":a("Next month"),icon:e.jsxDEV(de,{size:14},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:74,columnNumber:31},this),size:"sm",onClick:N,isDisabled:b,variant:"outline"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:72,columnNumber:23},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:63,columnNumber:21},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:58,columnNumber:19},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:43,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:42,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:41,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:29,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/DatePicker.tsx",lineNumber:27,columnNumber:5},this)}function Ee({selected:t,onSelect:l,minTime:s,maxTime:a}){const{t:i}=D();return e.jsxDEV(C,{placement:"top-start",isLazy:!0,children:({onClose:r})=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(y,{children:e.jsxDEV(u,{rightIcon:e.jsxDEV(ce,{size:20},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/TimePicker.tsx",lineNumber:23,columnNumber:26},this),variant:"outline",className:"text-left justify-between text-black font-normal w-full border-secondary-200",children:t&&A(t,"hh:mm a")||i("Select date")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/TimePicker.tsx",lineNumber:22,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/TimePicker.tsx",lineNumber:21,columnNumber:11},this),e.jsxDEV(S,{className:"p-4 max-w-56",children:e.jsxDEV("div",{className:"relative max-h-64 overflow-y-scroll",children:e.jsxDEV(O,{selected:t,minTime:s,maxTime:a||new Date(0,0,0,23,45),onChange:m=>{l(m),r()},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa",inline:!0},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/TimePicker.tsx",lineNumber:32,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/TimePicker.tsx",lineNumber:31,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/TimePicker.tsx",lineNumber:30,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/TimePicker.tsx",lineNumber:20,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/common/TimePicker.tsx",lineNumber:18,columnNumber:5},this)}function qe({isHidden:t=!1,toggleCreationMode:l,...s}){const{t:a}=D(),[i,r,m]=Q(s),{values:N}=X();return t?null:e.jsxDEV(z,{isInvalid:!!(r.touched&&r.error),children:[s.label&&e.jsxDEV(be,{className:"text-sm text-secondary-500",children:[" ",a(s.label)," "]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:45,columnNumber:9},this),I(s.type).with("customer",()=>e.jsxDEV(je,{toggleCreationMode:l,onSelect:c=>m.setValue(c.id)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:51,columnNumber:11},this)).with("select",()=>{var c;return e.jsxDEV(se,{children:[e.jsxDEV(ie,{as:u,rightIcon:e.jsxDEV(te,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:61,columnNumber:26},this),variant:"outline",className:"w-full text-left justify-start",children:e.jsxDEV(x,{color:i.value?"inherit":"secondary.400",children:ue(a(i.value))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:65,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:59,columnNumber:13},this),e.jsxDEV(ne,{className:"p-1",children:(c=s.options)==null?void 0:c.map(b=>e.jsxDEV(oe,{onClick:()=>m.setValue(b.value),children:b.label},b.value,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:71,columnNumber:17},this))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:69,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:58,columnNumber:11},this)}).with("numberWithController",()=>e.jsxDEV(Ne,{children:[e.jsxDEV(pe,{as:u,onClick:()=>m.setValue(i.value-1),className:"bg-secondary-100",isDisabled:i.value<=1,children:e.jsxDEV(M,{size:24},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:88,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:82,columnNumber:13},this),e.jsxDEV(v,{...i,type:"number"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:91,columnNumber:13},this),e.jsxDEV(fe,{as:u,onClick:()=>m.setValue(i.value+1),className:"bg-secondary-100",children:e.jsxDEV(L,{size:24},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:98,columnNumber:15},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:93,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:81,columnNumber:11},this)).with("datepicker",()=>e.jsxDEV(ve,{selected:i.value,onSelect:c=>{m.setValue(c||new Date)}},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:104,columnNumber:11},this)).with("time",()=>e.jsxDEV(Ee,{minTime:i.name==="endTime"?N.startTime:new Date(0,0,0,0,0),selected:i.value,onSelect:m.setValue},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:113,columnNumber:11},this)).with("textarea",()=>e.jsxDEV(he,{...s,...i,className:"focus:shadow-none focus:border-primary-500"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:121,columnNumber:11},this)).with("text","password","email","tel","number",()=>e.jsxDEV(v,{...s,...i},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:124,columnNumber:67},this)).otherwise(()=>null),e.jsxDEV(T,{children:r.error},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:126,columnNumber:7},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/Reservations/FieldRenderer.tsx",lineNumber:43,columnNumber:5},this)}export{ve as D,qe as F};
