import{q as Y,r,z as E,A as f,am as W,s as we,v as Te,ac as xe,d as C,af as Re,o as Z,a7 as ke,g as ee,N as Se,ag as Ee,B as De}from"./app-DV9Enp-g.js";import{b as Fe,u as Oe,f as Ae,i as Be,h as Me,j as Ie,e as je,l as He,k as _}from"./_rollupPluginBabelHelpers-3bc641ae-fORsOdMW.js";function Ne(e){return"current"in e}const oe=()=>typeof window<"u";function _e(){const e=navigator.userAgentData;return(e==null?void 0:e.platform)??navigator.platform}const ze=e=>oe()&&e.test(navigator.vendor),Le=e=>oe()&&e.test(_e()),Ve=()=>Le(/mac|iphone|ipad|ipod/i),Ke=()=>Ve()&&ze(/apple/i);function Ue(e){const{ref:t,elements:l,enabled:g}=e,d=()=>{var n;return((n=t.current)==null?void 0:n.ownerDocument)??document};Fe(d,"pointerdown",n=>{var c,P;if(!Ke()||!g)return;const m=((P=(c=n.composedPath)==null?void 0:c.call(n))==null?void 0:P[0])??n.target,w=(l??[t]).some(v=>{const T=Ne(v)?v.current:v;return(T==null?void 0:T.contains(m))||T===m});d().activeElement!==m&&w&&(n.preventDefault(),m.focus())})}const[$e,z]=Y({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[Ge,qe]=Y({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `}),R={click:"click",hover:"hover"};function Je(e={}){const{closeOnBlur:t=!0,closeOnEsc:l=!0,initialFocusRef:g,id:d,returnFocusOnClose:n=!0,autoFocus:m=!0,arrowSize:b,arrowShadowColor:w,trigger:c=R.click,openDelay:P=200,closeDelay:v=200,isLazy:T,lazyBehavior:ne="unmount",computePositionOnMount:re,...se}=e,{isOpen:i,onClose:p,onOpen:M,onToggle:L}=Oe(e),[ie,I]=r.useState(n);r.useEffect(()=>I(n),[n]);const j=r.useRef(null),k=r.useRef(null),y=r.useRef(null),S=r.useRef(!1),V=r.useRef(!1);i&&(V.current=!0);const[K,ae]=r.useState(!1),[U,ce]=r.useState(!1),le=r.useId(),ue=d??le,[$,D,F,O]=["popover-trigger","popover-content","popover-header","popover-body"].map(o=>`${o}-${ue}`),{referenceRef:A,getArrowProps:de,getPopperProps:G,getArrowInnerProps:pe,forceUpdate:fe}=Ae({...se,enabled:i||!!re}),q=Be({isOpen:i,ref:y});Ue({enabled:i,ref:k}),Me(y,{focusRef:k,visible:i,shouldFocus:ie&&c===R.click}),Ie(y,{focusRef:g,visible:i,shouldFocus:m&&c===R.click}),je({enabled:i&&t,ref:y,handler(o){var s;const a=((s=o.composedPath)==null?void 0:s.call(o)[0])??[o.target];B(k.current,a)||(a&&I(!W(a)),p())}});const J=He({wasSelected:V.current,enabled:T,mode:ne,isSelected:q.present}),ge=r.useCallback((o={},a=null)=>{const s={...o,style:{...o.style,transformOrigin:_.transformOrigin.varRef,[_.arrowSize.var]:b?`${b}px`:void 0,[_.arrowShadowColor.var]:w},ref:E(y,a),children:J?o.children:null,id:D,tabIndex:-1,role:"dialog",onKeyDown:f(o.onKeyDown,u=>{u.nativeEvent.isComposing||l&&u.key==="Escape"&&(u.preventDefault(),u.stopPropagation(),p())}),onBlur:f(o.onBlur,u=>{const x=X(u),N=B(y.current,x),Ce=B(k.current,x),be=!N&&!Ce;x&&I(!W(x)),i&&t&&be&&p()}),"aria-labelledby":K?F:void 0,"aria-describedby":U?O:void 0};return c===R.hover&&(s.role="tooltip",s.onMouseEnter=f(o.onMouseEnter,()=>{S.current=!0}),s.onMouseLeave=f(o.onMouseLeave,u=>{u.nativeEvent.relatedTarget!==null&&(S.current=!1,setTimeout(()=>p(),v))})),s},[J,D,K,F,U,O,c,l,p,i,t,v,w,b]),me=r.useCallback((o={},a=null)=>G({...o,style:{visibility:i?"visible":"hidden",...o.style}},a),[i,G]),ve=r.useCallback((o,a=null)=>({...o,ref:E(a,j,A)}),[j,A]),h=r.useRef(),H=r.useRef(),Q=r.useCallback(o=>{j.current==null&&A(o)},[A]),Pe=r.useCallback((o={},a=null)=>{const s={...o,ref:E(k,a,Q),id:$,"aria-haspopup":"dialog","aria-expanded":i,"aria-controls":D};return c===R.click&&(s.onClick=f(o.onClick,L)),c===R.hover&&(s.onFocus=f(o.onFocus,()=>{h.current===void 0&&M()}),s.onBlur=f(o.onBlur,u=>{const x=X(u),N=!B(y.current,x);i&&t&&N&&p()}),s.onKeyDown=f(o.onKeyDown,u=>{u.key==="Escape"&&p()}),s.onMouseEnter=f(o.onMouseEnter,()=>{S.current=!0,h.current=window.setTimeout(()=>M(),P)}),s.onMouseLeave=f(o.onMouseLeave,()=>{S.current=!1,h.current&&(clearTimeout(h.current),h.current=void 0),H.current=window.setTimeout(()=>{S.current===!1&&p()},v)})),s},[$,i,D,c,Q,L,M,t,p,P,v]);r.useEffect(()=>()=>{h.current&&clearTimeout(h.current),H.current&&clearTimeout(H.current)},[]);const ye=r.useCallback((o={},a=null)=>({...o,id:F,ref:E(a,s=>{ae(!!s)})}),[F]),he=r.useCallback((o={},a=null)=>({...o,id:O,ref:E(a,s=>{ce(!!s)})}),[O]);return{forceUpdate:fe,isOpen:i,onAnimationComplete:q.onComplete,onClose:p,getAnchorProps:ve,getArrowProps:de,getArrowInnerProps:pe,getPopoverPositionerProps:me,getPopoverProps:ge,getTriggerProps:Pe,getHeaderProps:ye,getBodyProps:he}}function B(e,t){return e===t||(e==null?void 0:e.contains(t))}function X(e){const t=e.currentTarget.ownerDocument.activeElement;return e.relatedTarget??t}function Qe(e){const t=we("Popover",e),{children:l,...g}=Te(e),d=xe(),n=Je({...g,direction:d.direction});return C.jsx($e,{value:n,children:C.jsx(Ge,{value:t,children:Re(l,{isOpen:n.isOpen,onClose:n.onClose,forceUpdate:n.forceUpdate})})})}Qe.displayName="Popover";function We(e){if(e)return{enter:{...e.enter,visibility:"visible"},exit:{...e.exit,transitionEnd:{visibility:"hidden"}}}}const Xe={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},Ye=Z(ke.section),te=ee(function(t,l){const{variants:g=Xe,...d}=t,{isOpen:n}=z();return C.jsx(Ye,{ref:l,variants:We(g),initial:!1,animate:n?"enter":"exit",...d})});te.displayName="PopoverTransition";const Ze=ee(function(t,l){const{rootProps:g,motionProps:d,...n}=t,{getPopoverProps:m,getPopoverPositionerProps:b,onAnimationComplete:w}=z(),c=qe(),P=Se({position:"relative",display:"flex",flexDirection:"column",...c.content});return C.jsx(Z.div,{...b(g),__css:c.popper,className:"chakra-popover__popper",children:C.jsx(te,{...d,...m(n,l),onAnimationComplete:Ee(w,n.onAnimationComplete),className:De("chakra-popover__content",t.className),__css:P})})});Ze.displayName="PopoverContent";function eo(e){const t=r.Children.only(e.children),{getTriggerProps:l}=z();return C.jsx(C.Fragment,{children:r.cloneElement(t,l(t.props,t.ref))})}eo.displayName="PopoverTrigger";export{Qe as P,eo as a,Ze as b,qe as c,z as u};
