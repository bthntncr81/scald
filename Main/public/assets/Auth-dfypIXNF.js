import{r as x,j as e,I as w,b as g,t as d,a2 as m,x as p,S as y}from"./app-DV9Enp-g.js";import{c as E,a as n,f as D}from"./index.esm-DH7tFHsH.js";import{u as V,c as S,F as j,a as v}from"./formik.esm-57hcKfmx.js";import{z as F}from"./index-CuMLbxmh.js";import{u}from"./useTranslation-B_tqir3M.js";import{F as L,B as q,I as b,a as P}from"./input-BY0aN3Wh.js";import{E as I}from"./Eye-14Q_bsoa.js";import{E as C}from"./EyeSlash-BmaZhiGA.js";import{R as l}from"./platform_roles-C6HFwJ_S.js";import{C as k}from"./checkbox-0eFyDNwp.js";import{B as A}from"./_rollupPluginBabelHelpers-3bc641ae-fORsOdMW.js";import{C as U}from"./CustomerLayout-Bc5Kc1H7.js";import{T,a as R,b as N,c as B,d as f}from"./tab-panels-vLnb1L73.js";import"./ArrowDown2-BYk1CnSd.js";import"./use-checkbox-CXyjvu9v.js";import"./visually-hidden.style-Bfr07Aua.js";import"./CustomerHeader-Yt-OgDBY.js";import"./validate_required_variants-CWNFFnRe.js";import"./Minus-hQCtIxHU.js";import"./currency_formatter-Bz1CGAdC.js";import"./use-radio-6sqGZ21b.js";import"./TickCircle-C8Z4cRgD.js";import"./Edit2-BR-gFx13.js";import"./tr-DmrvMSh4.js";import"./radio-BkVBa4kL.js";import"./popover-trigger-bCcTHQgY.js";import"./divider-ChBlpOfM.js";import"./Trash-D0bDSe0A.js";import"./textarea-7dmbfoGY.js";import"./popover-anchor-BlKiDovh.js";import"./input-group-B3tcnjIp.js";import"./input-element-D56J_yd_.js";import"./SearchNormal-wibGUap8.js";import"./popover-body-Dv7tL-tk.js";const z=E().shape({email:n().email("Invalid email address").required("Email is required"),password:n().required("Password is required")});function h({name:i,...s}){const{t}=u(),[r,a]=x.useState(!1),[o,c]=V(i);return e.jsxDEV(L,{isInvalid:!!(c.touched&&c.error),children:[e.jsxDEV(q,{className:"relative border rounded-2xl px-4 py-1.5 border-secondary-300 focus-within:border-primary-500",children:[s.label&&s.type!=="password"&&e.jsxDEV("label",{className:"text-xs leading-4 font-normal text-secondary-500",children:s.label},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/FormField.tsx",lineNumber:24,columnNumber:11},this),F(s).with({type:"password"},()=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(b,{rounded:"full",type:r?"text":s.type,placeholder:t(s.placeholder||""),className:"bg-white border-none leading-6 p-0 rounded-none font-normal text-base focus:outline-none focus:ring-0",...o},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/FormField.tsx",lineNumber:29,columnNumber:15},this),e.jsxDEV(P,{"aria-label":"Show password",size:"sm",variant:"ghost",onClick:()=>a(!r),className:"absolute right-2 top-1/2 -translate-y-1/2 z-10",children:e.jsxDEV(w,{as:r?I:C,className:"size-5 text-secondary-600"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/FormField.tsx",lineNumber:44,columnNumber:17},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/FormField.tsx",lineNumber:37,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/FormField.tsx",lineNumber:28,columnNumber:13},this)).otherwise(()=>e.jsxDEV(b,{rounded:"full",type:s.type,placeholder:t(s.placeholder||""),className:"bg-white border-none p-0 h-fit leading-6 rounded-none font-normal text-base focus:outline-none focus:ring-0",...o},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/FormField.tsx",lineNumber:49,columnNumber:13},this))]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/FormField.tsx",lineNumber:22,columnNumber:7},this),e.jsxDEV(S,{className:"px-4",children:t(c.error||"")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/FormField.tsx",lineNumber:58,columnNumber:7},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/FormField.tsx",lineNumber:21,columnNumber:5},this)}function M(){const{t:i}=u();return e.jsxDEV(j,{initialValues:{email:"",password:"",remember:!1},onSubmit:async(s,t)=>{var r;try{t.setSubmitting(!0);const{data:a}=await g.post("/api/auth/login",s);if(!a.login&&a.requiredVerification&&d.success(i(a.message)),a.login&&a.user)switch((r=a==null?void 0:a.user)==null?void 0:r.roleId){case l.ADMIN:m.visit("/admin/dashboard");break;case l.MANAGER:m.visit("/manager/dashboard");break;case l.POS:m.visit("/pos/pos");break;case l.DISPLAY:m.visit("/display");break;case l.KITCHEN:m.visit("/kitchen");break;case l.CUSTOMER:m.visit("/");break;default:m.visit("/")}}catch(a){d.error(i(a.response.data.message)||i("Invalid Credentials"))}finally{t.setSubmitting(!1)}},validationSchema:z,children:({isSubmitting:s})=>e.jsxDEV(v,{className:"space-y-4",children:[e.jsxDEV(h,{name:"email",type:"email",label:i("Email"),placeholder:i("Enter your email")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/Login.tsx",lineNumber:69,columnNumber:11},this),e.jsxDEV(h,{name:"password",type:"password",label:i("Password"),placeholder:i("Enter password")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/Login.tsx",lineNumber:78,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-between items-center flex-wrap",children:[e.jsxDEV(k,{colorScheme:"primary",className:"text-secondary-800 rounded whitespace-nowrap",defaultChecked:!0,children:i("Remember me")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/Login.tsx",lineNumber:86,columnNumber:13},this),e.jsxDEV(p,{href:"/forgot-password",className:"font-medium underline hover:text-primary-400 transition whitespace-nowrap",children:i("Forgot password?")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/Login.tsx",lineNumber:93,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/Login.tsx",lineNumber:85,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV(A,{variant:"solid",colorScheme:"primary",isLoading:s,type:"submit",className:"button-primary",children:i("Login")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/Login.tsx",lineNumber:101,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/Login.tsx",lineNumber:100,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/Login.tsx",lineNumber:67,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/Login.tsx",lineNumber:15,columnNumber:5},this)}const O=E().shape({firstName:n().required("First name is required"),lastName:n().required("Last name is required"),email:n().email("Invalid email").required("Email is required"),phoneNumber:n().required("Phone number is required"),address:n().required("Address is required"),password:n().min(8,"Password must be at least 8 characters").required("Password is required"),confirmPassword:n().oneOf([D("password")],"Passwords must match").required("Confirm password is required")});function $(){const{t:i}=u(),s=[{name:"firstName",label:"First name",type:"text",placeholder:"Enter your first name"},{name:"lastName",label:"Last name",type:"text",placeholder:"Enter your last name"},{name:"email",label:"Email",type:"email",placeholder:"Enter your email"},{name:"phoneNumber",label:"Phone",type:"tel",placeholder:"Enter your phone"},{name:"address",label:"Address",type:"text",placeholder:"Enter your address"},{name:"password",label:"Password",type:"password",placeholder:"Enter password"},{name:"confirmPassword",label:"Confirm Password",type:"password",placeholder:"Re-enter password"}];return e.jsxDEV(j,{initialValues:{firstName:"",lastName:"",email:"",password:"",address:"",phoneNumber:"",confirmPassword:""},onSubmit:async(t,r)=>{var a;try{r.setSubmitting(!0);const{data:o}=await g.post("/api/auth/register",t);o.success&&((a=o==null?void 0:o.user)!=null&&a.id)&&d.success(i(o.message))}catch(o){d.error(i(o.response.data.message)||i("Something went wrong"))}finally{r.setSubmitting(!1)}},validationSchema:O,children:({isSubmitting:t})=>e.jsxDEV(v,{className:"space-y-4",children:[s.map(r=>e.jsxDEV(h,{...r},r.name,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/SignUp.tsx",lineNumber:57,columnNumber:13},this)),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV(A,{variant:"solid",colorScheme:"primary",isLoading:t,type:"submit",className:"button-primary",children:i("Sign Up")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/SignUp.tsx",lineNumber:61,columnNumber:13},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/SignUp.tsx",lineNumber:60,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/SignUp.tsx",lineNumber:55,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Auth/SignUp.tsx",lineNumber:29,columnNumber:5},this)}function we({...i}){const{t:s}=u(),t=window.location.pathname.split("/")[1];return x.useEffect(()=>{i.auth&&(window.location.href="/")},[]),i.auth?e.jsxDEV("div",{className:"w-screen h-screen flex items-center justify-center",children:e.jsxDEV(y,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:22,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:21,columnNumber:7},this):e.jsxDEV(U,{children:e.jsxDEV("div",{className:"py-14 px-4",children:e.jsxDEV("div",{className:"max-w-[638px] mx-auto bg-white py-12 px-6 sm:px-16 rounded-2xl shadow-auth",children:[e.jsxDEV("h2",{className:"text-2xl font-semibold text-center mb-2",children:s("Welcome")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:31,columnNumber:11},this),e.jsxDEV("p",{className:"text-center mb-8",children:s("Sign up or sign in to continue")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:32,columnNumber:11},this),e.jsxDEV(T,{defaultIndex:t==="login"?0:1,variant:"soft-rounded",colorScheme:"green",children:[e.jsxDEV(R,{className:"auth-tab",children:[e.jsxDEV(N,{as:p,href:"/login",children:s("Login")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:35,columnNumber:15},this),e.jsxDEV(N,{as:p,href:"/signup",children:s("Sign Up")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:38,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:34,columnNumber:13},this),e.jsxDEV(B,{children:[e.jsxDEV(f,{pb:0,children:e.jsxDEV(M,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:44,columnNumber:17},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:43,columnNumber:15},this),e.jsxDEV(f,{pb:0,children:e.jsxDEV($,{},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:47,columnNumber:17},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:46,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:42,columnNumber:13},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:33,columnNumber:11},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:30,columnNumber:9},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:29,columnNumber:7},this)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/pages/Auth/Auth.tsx",lineNumber:28,columnNumber:5},this)}export{we as default};
