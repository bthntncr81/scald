import{r as A,u as P,f as w,j as e,I,S as M,b as O,t as b}from"./app-p3FobzL5.js";import{c as T}from"./currency_formatter-Bz1CGAdC.js";import{O as B}from"./order_status-CM2aeLIm.js";import{s as L}from"./string_formatter-C0BoQtKC.js";import{u as j}from"./useTranslation-jbS6ivqO.js";import{H as x,B as y}from"./platform_roles-D3HjcMuK.js";import{T as z,U as _}from"./User-B7pdFi89.js";import{M as g,a as k,A as E,b as V,T as U,c as C}from"./ArrowDown2-DM1rERZ4.js";import{B as S}from"./_rollupPluginBabelHelpers-3bc641ae-btRFf1Fy.js";import{B as H}from"./input-cx0LjzCS.js";import{f as R}from"./format-DNgEHVKA.js";function W({type:u,status:s,deliveryPerson:a,orderId:t,refresh:r}){const{t:m}=j(),[d,N]=A.useState(!1),{data:n,isLoading:v}=P(()=>u==="delivery"&&"/api/users?type=delivery",w),h=async i=>{var l;N(!0);try{const{data:c}=await O.patch(`/api/orders/${t}`,{deliveryManId:i});(l=c==null?void 0:c.content)!=null&&l.id&&(b.success(m("Delivery person updated successfully")),r==null||r())}catch(c){b.error(m(c.response.data.message||"Something went wrong"))}finally{N(!1)}};return s==="pending"?null:s!=="processing"&&s!=="ready"?e.jsxDEV("div",{className:"flex-1 font-normal text-left border py-2 px-3 rounded-md border-secondary-200 bg-secondary-50",children:e.jsxDEV(x,{children:[e.jsxDEV(I,{as:s==="on_delivery"?z:_,size:"sm"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:73,columnNumber:11},this),e.jsxDEV("span",{children:a==null?void 0:a.fullName},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:74,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:72,columnNumber:9},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:71,columnNumber:7},this):e.jsxDEV(g,{matchWidth:!0,children:[e.jsxDEV(x,{className:"flex-1 w-full gap-0",children:[e.jsxDEV(k,{as:S,variant:"outline",className:"flex-1 rounded-r-none",onClick:i=>i.stopPropagation(),children:e.jsxDEV("div",{className:"flex-1 text-left",children:d?e.jsxDEV("span",{className:"text-secondary-400",children:[" ",m("Loading...")," "]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:91,columnNumber:15},this):(a==null?void 0:a.fullName)||e.jsxDEV("span",{className:"text-secondary-400 font-normal",children:m("Select delivery person")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:94,columnNumber:17},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:89,columnNumber:11},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:83,columnNumber:9},this),e.jsxDEV("div",{className:"border border-secondary-200 bg-secondary-100 h-10 text-secondary-400 w-10 p-0 flex items-center justify-center rounded-r-md",children:e.jsxDEV(E,{size:16},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:102,columnNumber:11},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:101,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:82,columnNumber:7},this),e.jsxDEV(V,{className:"p-1",children:v?e.jsxDEV(x,{justifyContent:"center",py:"2.5",children:[e.jsxDEV(M,{size:"sm"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:109,columnNumber:13},this),e.jsxDEV(U,{className:"text-secondary-500",children:[" ",m("Loading...")," "]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:110,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:108,columnNumber:11},this):(n==null?void 0:n.length)===0?e.jsxDEV(U,{children:m("Delivery person isn't available")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:113,columnNumber:11},this):n==null?void 0:n.map(i=>e.jsxDEV(C,{onClick:l=>{l.stopPropagation(),h(i.id)},children:m(i.fullName)},i.id,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:116,columnNumber:13},this))},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:106,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/UpdateDeliveryPerson.tsx",lineNumber:81,columnNumber:5},this)}const D=new B;function re({onClick:u,data:s,refresh:a}){const{t}=j(),[r,m]=A.useState(()=>D.getStatusDetails(s.status||"pending"));if(A.useEffect(()=>{m(D.getStatusDetails(s.status))},[s]),!s)return;const{id:d,orderNumber:N,type:n,grandTotal:v,orderItems:h,paymentStatus:i,createdAt:l}=s,c=async o=>{var f;if(!s.deliveryManId&&s.type==="delivery"&&(o.value==="on_delivery"||o.value==="completed")){b.error(t("Select delivery person first"));return}try{const{data:p}=await O.patch(`/api/orders/${d}`,{status:o.value});(f=p==null?void 0:p.content)!=null&&f.id&&(b.success(t("Order updated successfully")),a())}catch(p){b.error(t(p.response.data.message||"Something went wrong"))}};return e.jsxDEV(H,{onClick:()=>u==null?void 0:u(d),className:"h-56 flex flex-col justify-between bg-white shadow-primary rounded-md p-4 cursor-pointer",children:[e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(y,{colorScheme:{dine_in:"cyan",delivery:"primary",pickup:"blue"}[n],mb:1,children:t(L(n))},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:87,columnNumber:11},this),e.jsxDEV("p",{className:"text-secondary-600 font-bold mb-1",children:["#",N]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:93,columnNumber:11},this),e.jsxDEV("p",{className:"text-secondary-400 text-sm",children:R(new Date(l),"MMM dd, yyyy | hh:mm a")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:94,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:86,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col items-end",children:[e.jsxDEV(y,{colorScheme:i?"green":"orange",mb:1,children:t(i?"Paid":"Unpaid")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:99,columnNumber:11},this),e.jsxDEV("p",{className:"text-secondary-600 font-bold mb-1",children:T(v)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:102,columnNumber:11},this),e.jsxDEV("p",{className:"text-secondary-400 text-sm",children:[h.length," ",h.length>1?t("Item(s)"):t("Item")]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:103,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:98,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:85,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-col gap-2",children:[r.value!=="pending"&&n==="delivery"?e.jsxDEV("div",{className:"flex items-center gap-4",children:e.jsxDEV(W,{type:n,status:s.status,orderId:d,deliveryPerson:s.deliveryMan,refresh:a},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:112,columnNumber:13},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:111,columnNumber:11},this):null,e.jsxDEV(g,{children:[e.jsxDEV(k,{as:S,w:"full",variant:"outline",textAlign:"left",colorScheme:r==null?void 0:r.scheme,color:r==null?void 0:r.fgColor,borderColor:r==null?void 0:r.fgColor,rightIcon:e.jsxDEV(E,{},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:130,columnNumber:24},this),onClick:o=>o.stopPropagation(),children:t(r==null?void 0:r.label)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:122,columnNumber:11},this),e.jsxDEV(V,{className:"p-1",children:D.all().map(o=>(!o.orderType||o.orderType===n)&&e.jsxDEV(C,{color:o.fgColor,onClick:f=>{f.stopPropagation(),c(o)},children:t(o.label)},o.value,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:139,columnNumber:19},this))},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:135,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:121,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:109,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/ActiveOrders/OrderCard.tsx",lineNumber:81,columnNumber:5},this)}export{re as O,W as U};
