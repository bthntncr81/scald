import{r as l,j as i,b as x,t as u}from"./app-DV9Enp-g.js";import{D}from"./DataTable-CNld8Vzj.js";import{u as O}from"./use_table_data-Dqvu1vx3.js";import{c as E}from"./currency_formatter-Bz1CGAdC.js";import{U as j,O as T,D as A}from"./DeleteOrder-DMMuBqZM.js";import{P as V}from"./PersonSelection-DKFDbMD9.js";import{u as K}from"./useTranslation-B_tqir3M.js";import{B as p,H as P}from"./platform_roles-C6HFwJ_S.js";import{S as k}from"./switch-B97T3cky.js";import{T as C}from"./ArrowDown2-BYk1CnSd.js";import"./Pagination-BLwLKiba.js";import"./tr-DmrvMSh4.js";import"./_rollupPluginBabelHelpers-3bc641ae-fORsOdMW.js";import"./ArrowRight2-Cm1MJeQW.js";import"./order_status-CM2aeLIm.js";import"./string_formatter-C0BoQtKC.js";import"./index-CuMLbxmh.js";import"./PrintInvoice-D4UWVblX.js";import"./input-BY0aN3Wh.js";import"./popover-trigger-bCcTHQgY.js";import"./divider-ChBlpOfM.js";import"./generate_invoice-stSZ9ez8.js";import"./DiscountTypeSelect-DQGXDPdn.js";import"./use-radio-6sqGZ21b.js";import"./visually-hidden.style-Bfr07Aua.js";import"./Eye-14Q_bsoa.js";import"./textarea-7dmbfoGY.js";import"./Trash-D0bDSe0A.js";import"./popover-arrow-CcvyMVbB.js";import"./popover-header-BFLhNdCb.js";import"./popover-body-Dv7tL-tk.js";import"./popover-footer-DDOtcm9S.js";import"./useDebounce-BZ39Q-Ut.js";import"./User-nTP7YzRg.js";import"./use-checkbox-CXyjvu9v.js";function be({setSelectedRow:d}){const{t}=K(),[g,b]=l.useState([]),[y,h]=l.useState(1),[N,f]=l.useState(10),{items:m,isLoading:v,refresh:n,meta:r,isValidating:c}=O("/api/orders",{page:y,limit:N,status:"on_delivery"});l.useEffect(()=>{!c&&m.length===0&&d([])},[c]);const S=async(e,a)=>{var s;try{const{data:o}=await x.patch(`/api/orders/${e}`,a);(s=o==null?void 0:o.content)!=null&&s.id&&(u.success(t("Order updated successfully")),n())}catch(o){u.error(t(o.response.data.message||"Something went wrong"))}};return i.jsxDEV(D,{data:m,sorting:g,setSorting:b,isLoading:v,onRowSelection:d,getRowId:e=>e.id,enableMultiRowSelection:!0,pagination:{total:r==null?void 0:r.total,page:r==null?void 0:r.currentPage,limit:r==null?void 0:r.perPage,setPage:h,setLimit:f},structure:[{accessorKey:"checkbox",enableSorting:!1,header:({table:e})=>i.jsxDEV("input",{type:"checkbox",checked:e==null?void 0:e.getIsAllRowsSelected(),onChange:e==null?void 0:e.getToggleAllRowsSelectedHandler(),className:"accent-primary-500 cursor-pointer scale-110"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:73,columnNumber:13},this),cell:({row:e})=>i.jsxDEV("input",{type:"checkbox",checked:e==null?void 0:e.getIsSelected(),onChange:e==null?void 0:e.getToggleSelectedHandler(),className:"accent-primary-500 cursor-pointer scale-110"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:81,columnNumber:13},this)},{accessorKey:"id",header:()=>t("SL"),cell:e=>e.row.index+1},{accessorKey:"orderNumber",header:()=>t("Order No"),cell:({row:e})=>i.jsxDEV("span",{className:"font-bold",children:e.original.orderNumber},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:97,columnNumber:30},this)},{accessorKey:"createdAt",header:()=>t("Created On"),cell:({row:e})=>i.jsxDEV("div",{children:new Date(e.original.createdAt).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(","," -")},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:103,columnNumber:13},this)},{accessorKey:"user.fullName",header:()=>t("Customer name"),cell:({row:e})=>{var a,s;return i.jsxDEV("div",{children:((s=(a=e.original)==null?void 0:a.user)==null?void 0:s.fullName)||"Guest"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:120,columnNumber:30},this)}},{accessorKey:"type",header:()=>t("Type"),cell:({row:e})=>{var s;const a={dine_in:"teal",delivery:"primary",pickup:"blue"};return i.jsxDEV(p,{variant:"solid",colorScheme:a[e.original.type]||"secondary",children:t((s=e.original.type)==null?void 0:s.replace("_","-"))},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:133,columnNumber:15},this)}},{accessorKey:"grandTotal",header:()=>t("Total"),cell:({row:e})=>i.jsxDEV("p",{className:"font-bold",children:E(e.original.grandTotal)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:148,columnNumber:13},this)},{accessorKey:"paymentType",header:()=>t("Payment"),cell:({row:e})=>i.jsxDEV(p,{variant:"subtle",colorScheme:e.original.paymentType==="cash"?"primary":"blue",children:t(e.original.paymentType)},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:155,columnNumber:13},this)},{accessorKey:"paymentStatus",header:()=>t("Paid"),cell:({row:e})=>i.jsxDEV(k,{defaultChecked:e.original.paymentStatus,colorScheme:"green",size:"lg",onChange:a=>S(e.original.id,{paymentStatus:a.target.checked})},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:167,columnNumber:13},this)},{accessorKey:"status",header:()=>t("Status"),cell:({row:e})=>i.jsxDEV(j,{orderId:e.original.id,status:e.original.status,refresh:n,type:e.original.type,isDeliveryPersonSelected:!!e.original.deliveryManId},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:179,columnNumber:13},this)},{accessorKey:"deliveryPerson.fullName",header:()=>t("Delivery person"),cell:({row:e})=>e.original.type!=="delivery"?i.jsxDEV(C,{color:"secondary.400",children:"N/A"},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:193,columnNumber:58},this):i.jsxDEV(V,{refresh:n,data:e.original},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:194,columnNumber:20},this)},{accessorKey:"action",header:()=>t("Action"),cell:({row:e})=>i.jsxDEV(P,{gap:2,children:[i.jsxDEV(T,{orderId:e.original.id,refresh:n},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:202,columnNumber:15},this),i.jsxDEV(A,{isIconButton:!0,id:e.original.id,refresh:n},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:203,columnNumber:15},this)]},void 0,!0,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:201,columnNumber:13},this)}]},void 0,!1,{fileName:"E:/abid/getpasto-adonisjs6/inertia/components/Admin/OrderStatus/OnDeliveryTable.tsx",lineNumber:53,columnNumber:5},this)}export{be as default};
