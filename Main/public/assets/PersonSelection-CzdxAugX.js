import{r as l,R as D,u as v,f as y,j as e,I as k,S as E,b as j,t as d}from"./app-p3FobzL5.js";import{u as A}from"./useDebounce-C3LzOcPg.js";import{u as U}from"./useTranslation-jbS6ivqO.js";import{H as m}from"./platform_roles-D3HjcMuK.js";import{T as O,U as P}from"./User-B7pdFi89.js";import{M as V,a as g,A as M,b as I,T as p,c as w}from"./ArrowDown2-DM1rERZ4.js";import{B as T}from"./_rollupPluginBabelHelpers-3bc641ae-btRFf1Fy.js";import{B as z,I as B}from"./input-cx0LjzCS.js";function q({data:t,refresh:b}){const{t:n}=U(),[s,u]=l.useState(()=>t.deliveryMan||{}),[h,N]=D.useState(""),f=A(h,300),{data:o,isLoading:S}=v(`/api/users?type=delivery&search=${f}`,y),x=async(r,a)=>{var c;try{const{data:i}=await j.patch(`/api/orders/${a}`,{deliveryManId:r});(c=i==null?void 0:i.content)!=null&&c.id&&(d.success(n("Order updated successfully")),b())}catch(i){d.error(n(i.response.data.message||"Something went wrong"))}};return l.useEffect(()=>{u(t.deliveryMan||"")},[t]),t.status!=="processing"?e.jsxDEV("div",{className:"flex-1 font-normal text-left border py-2 px-3 rounded-md border-secondary-200 bg-secondary-50",children:e.jsxDEV(m,{children:[e.jsxDEV(k,{as:t.status==="on_delivery"?O:P,size:"sm"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:68,columnNumber:11},this),e.jsxDEV("span",{children:s==null?void 0:s.fullName},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:69,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:67,columnNumber:9},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:66,columnNumber:7},this):e.jsxDEV(V,{children:[e.jsxDEV(m,{gap:0,children:e.jsxDEV(g,{as:T,size:"md",variant:"outline",onClick:r=>r.stopPropagation(),color:s?"inherit":"secondary.400",bg:"white",fontWeight:"normal",rightIcon:e.jsxDEV(M,{},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:86,columnNumber:22},this),children:(s==null?void 0:s.fullName)||n("Select delivery man")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:78,columnNumber:9},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:77,columnNumber:7},this),e.jsxDEV(I,{className:"p-1",children:S?e.jsxDEV(m,{color:"secondary.400",children:[e.jsxDEV(E,{size:"sm"},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:94,columnNumber:13},this),e.jsxDEV(p,{fontSize:"sm",color:"secondary.400",py:2,px:3,children:n("Loading...")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:95,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:93,columnNumber:11},this):o.length?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(z,{className:"pb-1 border-b border-black/5",children:e.jsxDEV(B,{type:"search",placeholder:"Search delivery man",onChange:r=>N(r.target.value)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:102,columnNumber:15},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:101,columnNumber:13},this),o==null?void 0:o.map(r=>e.jsxDEV(w,{onClick:()=>{u(o.find(a=>a.id===r.id)),x(r.id,t.id)},children:r.fullName},r.id,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:111,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:100,columnNumber:11},this):e.jsxDEV(p,{fontSize:"sm",color:"secondary.400",py:2,px:3,children:n("No delivery man available")},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:126,columnNumber:11},this)},void 0,!1,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:91,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/omerbatuhantuncer/Desktop/resto/source/inertia/components/Admin/OrderStatus/PersonSelection.tsx",lineNumber:76,columnNumber:5},this)}export{q as P};
